<!DOCTYPE html>
<html lang='pt-BR'>
<head><meta charset='UTF-8'><link href='https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&display=swap' rel='stylesheet'><title>Documenta√ß√£o - Portfolio Tiago Damasceno</title><style>*{margin:0;padding:0;box-sizing:border-box}:root{--primary:#2563eb;--primary-dark:#1e40af;--gray-50:#f9fafb;--gray-100:#f3f4f6;--gray-200:#e5e7eb;--gray-600:#4b5563;--gray-800:#1f2937}body{font-family:'Lato',sans-serif;font-size:11pt;line-height:1.7;color:var(--gray-800)}@page{size:A4;margin:20mm 25mm}.cover{background:linear-gradient(135deg,var(--primary),var(--primary-dark));color:white;min-height:297mm;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:40mm 30mm;page-break-after:always}.cover h1{font-size:42pt;font-weight:900;margin-bottom:8mm;text-transform:uppercase;letter-spacing:3px}.cover h2{font-size:22pt;font-weight:300;margin-bottom:20mm;opacity:.95}.cover-info{font-size:18pt;font-weight:700}.cover-domain{font-size:16pt;margin:5mm 0 15mm;opacity:.9}.cover-footer{font-size:12pt;font-weight:300;opacity:.8;margin-top:auto}.content{padding:20mm 25mm}h1{font-size:24pt;font-weight:900;color:var(--primary);margin:20pt 0 12pt;padding-bottom:8pt;border-bottom:4px solid var(--primary)}h2{font-size:18pt;font-weight:700;color:var(--primary-dark);margin:18pt 0 10pt;padding-left:12pt;border-left:5px solid var(--primary)}h3{font-size:14pt;font-weight:700;margin:15pt 0 8pt}p{margin-bottom:10pt;text-align:justify}code{background:var(--gray-100);padding:2pt 6pt;border-radius:4pt;font-size:9.5pt;color:#dc2626;font-weight:500}pre{background:#282c34;color:#abb2bf;border-left:5px solid var(--primary);padding:15pt;margin:15pt 0;border-radius:6pt}pre code{background:transparent;padding:0;color:inherit;font-size:9pt}table{width:100%;border-collapse:collapse;margin:15pt 0;font-size:10pt}thead{background:var(--primary);color:white}th,td{padding:10pt;border:1px solid var(--gray-200);text-align:left}tbody tr:nth-child(even){background:var(--gray-50)}ul,ol{margin:10pt 0;padding-left:25pt}li{margin-bottom:6pt}a{color:var(--primary);text-decoration:none;font-weight:600}.footer{position:fixed;bottom:0;left:0;right:0;height:10mm;background:var(--gray-100);padding:3mm 25mm;display:flex;justify-content:space-between;align-items:center;font-size:9pt;color:var(--gray-600);border-top:2px solid var(--gray-200)}</style></head><body><div class='cover'><h1>Documenta√ß√£o T√©cnica</h1><h2>Portfolio de Fotografia</h2><div class='cover-info'>Tiago Damasceno</div><div class='cover-domain'>tdfoco.cloud</div><div class='cover-footer'>30 de Novembro de 2025 | Vers√£o 1.0<br>React  TypeScript  Vite  Supabase</div></div><div class='content'><h1>Documenta√ß√£o T√©cnica Completa</h1>
<h2>Portfolio de Fotografia - Tiago Damasceno</h2>

---

<h2>üìã √çndice</h2>

1. <a href="#1-vis√£o-geral-do-projeto">Vis√£o Geral do Projeto</a>
2. <a href="#2-arquitetura-do-sistema">Arquitetura do Sistema</a>
3. <a href="#3-stack-tecnol√≥gica">Stack Tecnol√≥gica</a>
4. <a href="#4-estrutura-do-c√≥digo">Estrutura do C√≥digo</a>
5. <a href="#5-componentes-principais">Componentes Principais</a>
6. <a href="#6-hooks-custom izados">Hooks Customizados</a>
7. <a href="#7-backend-e-banco-de-dados">Backend e Banco de Dados</a>
8. <a href="#8-funcionalidades-implementadas">Funcionalidades Implementadas</a>
9. <a href="#9-configura√ß√£o-e-deploy">Configura√ß√£o e Deploy</a>
10. <a href="#10-hist√≥rico-de-desenvolvimento">Hist√≥rico de Desenvolvimento</a>

---

<h2>1. Vis√£o Geral do Projeto</h2>

<h3>1.1 Descri√ß√£o</h3>
Portfolio profissional de fotografia e design gr√°fico desenvolvido para <strong>Tiago Damasceno</strong>. A aplica√ß√£o √© uma plataforma web moderna que exibe trabalhos de fotografia em diferentes categorias (retratos, urbano, natureza, arte, eventos) e projetos de design gr√°fico (branding, editorial, web, ilustra√ß√£o, packaging).

<h3>1.2 Objetivos</h3>
- Apresentar portf√≥lio fotogr√°fico de forma elegante e profissional
- Permitir gerenciamento de conte√∫do via painel administrativo
- Oferecer experi√™ncia interativa com sistema de curtidas, compartilhamentos e coment√°rios
- Suportar internacionaliza√ß√£o (PT-BR e EN)
- Proteger imagens  contra download n√£o autorizado
- Otimizado para SEO e performance

<h3>1.3 P√∫blico-Alvo</h3>
- Clientes potenciais buscando servi√ßos de fotografia
- Recrutadores e empresas
- Visitantes interessados em trabalhos fotogr√°ficos e design

---

<h2>2. Arquitetura do Sistema</h2>

<h3>2.1 Arquitetura Geral</h3>

``<code>mermaid
graph TB
    subgraph "Frontend - React + Vite"
        A[App.tsx] --> B[Router]
        B --> C[Pages]
        C --> D[Index/Home]
        C --> E[Photography]
        C --> F[Graphic Design]
        C --> G[About]
        C --> H[Admin Panel]
        C --> I[Contact]
        C --> J[Services]
        C --> K[Ranking]
    end
    
    subgraph "State Management"
        L[React Context]
        M[Custom Hooks]
        L --> N[LanguageContext]
        M --> O[useSupabaseData]
        M --> P[useImageProtection]
        M --> Q[useSearch]
    end
    
    subgraph "Backend - Supabase"
        R[Authentication]
        S[PostgreSQL Database]
        T[Storage Buckets]
        S --> U[(photography_table)]
        S --> V[(design_projects_table)]
        S --> W[(comments_table)]
        S --> X[(hero_images_table)]
        T --> Y[photography_bucket]
        T --> Z[design_bucket]
        T --> AA[hero_bucket]
    end
    
    C --> L
    C --> M
    M --> R
    M --> S
    M --> T
</code>`<code>

<h3>2.2 Fluxo de Dados</h3>

1. <strong>Usu√°rio</strong> acessa p√°gina ‚Üí <strong>React Router</strong> determina rota
2. <strong>P√°gina/Componente</strong> solicita dados via <strong>Custom Hook</strong>
3. <strong>Hook</strong> faz requisi√ß√£o ao <strong>Supabase</strong>
4. <strong>Supabase </strong> retorna dados (ap√≥s validar RLS policies)
5. <strong>Componente</strong> renderiza dados no UI
6. <strong>Intera√ß√µes do usu√°rio</strong> (likes, comments) ‚Üí Update no Supabase
7. <strong>Real-time updates</strong> (opcional) via Supabase Realtime

---

<h2>3. Stack Tecnol√≥gica</h2>

<h3>3.1 Frontend</h3>

| Tecnologia | Vers√£o | Prop√≥sito |
|------------|--------|-----------|
| <strong>React</strong> | 18.3.1 | Framework principal UI |
| <strong>TypeScript</strong> | 5.8.3 | Tipagem est√°tica |
| <strong>Vite</strong> | 5.4.19 | Build tool e dev server |
| <strong>React Router DOM</strong> | 6.30.1 | Roteamento SPA |
| <strong>Tailwind CSS</strong> | 3.4.17 | Estiliza√ß√£o utility-first |
| <strong>shadcn/ui</strong> | - | Componentes UI (Radix UI) |
| <strong>Lucide React</strong> | 0.462.0 | √çcones SVG |

<h3>3.2 Backend/Database</h3>

| Tecnologia | Prop√≥sito |
|------------|-----------|
| <strong>Supabase</strong> | Backend-as-a-Service |
| <strong>PostgreSQL</strong> | Banco de dados relacional |
| <strong>Supabase Storage</strong> | Armazenamento de imagens |
| <strong>Supabase Auth</strong> | Autentica√ß√£o de administradores |
| <strong>Row Level Security (RLS)</strong> | Controle de acesso granular |

<h3>3.3 Bibliotecas Adicionais</h3>

| Biblioteca | Prop√≥sito |
|------------|-----------|
| <strong>exifr</strong> | Extra√ß√£o de metadados EXIF de fotos |
| <strong>react-helmet-async</strong> | Gerenciamento de meta tags SEO |
| <strong>embla-carousel-react</strong> | Carross√©is de imagens |
| <strong>react-hook-form</strong> | Gerenciamento de formul√°rios |
| <strong>zod</strong> | Valida√ß√£o de schemas |
| <strong>date-fns</strong> | Manipula√ß√£o de datas |
| <strong>@tanstack/react-query</strong> | Cache e sincroniza√ß√£o de dados |

---

<h2>4. Estrutura do C√≥digo</h2>

<h3>4.1 Estrutura de Diret√≥rios</h3>

</code>`<code>
Portifolio/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ pages/              # P√°ginas principais da aplica√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Index.tsx       # P√°gina inicial
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Photography.tsx # Galeria de fotografias
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GraphicDesign.tsx # Portf√≥lio de design
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AboutPage.tsx   # Sobre o fot√≥grafo  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Admin.tsx       # Painel administrativo  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Contact.tsx     # P√°gina de contato
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Services.tsx    # Servi√ßos oferecidos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Ranking.tsx     # Ranking de trabalhos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NotFound.tsx    # P√°gina 404
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/         # Componentes reutiliz√°veis
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/             # Componentes shadcn/ui (49 componentes)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Hero.tsx        # Banner hero
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navigation.tsx  # Barra de navega√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Footer.tsx      # Rodap√©
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PhotoGrid.tsx   # Grade de fotos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DesignGrid.tsx  # Grade de projetos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Lightbox.tsx    # Visualiza√ß√£o de imagem expandida
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CommentsSection.tsx # Sistema de coment√°rios
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InteractionBar.tsx  # Likes/shares/comments
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RankingSection.tsx  # Se√ß√£o de ranking
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProtectedImage.tsx  # Prote√ß√£o de imagens
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SearchBar.tsx   # Busca
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LanguageSelector.tsx # Seletor de idioma
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BatchUpload.tsx  # Upload m√∫ltiplo
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AllCommentsManagement.tsx # Gerenciamento de coment√°rios
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ hooks/              # Custom React Hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useSupabaseData.ts    # Integra√ß√£o com Supabase
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useImageProtection.ts # Prote√ß√£o de imagens
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useSearch.ts          # Funcionalidade de busca
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-toast.ts          # Sistema de notifica√ß√µes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ use-mobile.tsx        # Detec√ß√£o de mobile
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ contexts/           # React Contexts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LanguageContext.tsx   # Contexto de internacionaliza√ß√£o
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ lib/                # Utilit√°rios e configura√ß√µes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ supabase.ts     # Cliente e tipos Supabase
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.ts        # Fun√ß√µes utilit√°rias
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exifExtractor.ts # Extra√ß√£o de EXIF
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx             # Componente raiz
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx            # Entry point
‚îÇ   ‚îî‚îÄ‚îÄ index.css           # Estilos globais
‚îÇ
‚îú‚îÄ‚îÄ public/                 # Arquivos est√°ticos
‚îú‚îÄ‚îÄ *.sql                   # Scripts de migra√ß√£o/configura√ß√£o DB
‚îú‚îÄ‚îÄ package.json            # Depend√™ncias e scripts
‚îú‚îÄ‚îÄ vite.config.ts          # Configura√ß√£o Vite
‚îú‚îÄ‚îÄ tailwind.config.ts      # Configura√ß√£o Tailwind
‚îú‚îÄ‚îÄ tsconfig.json           # Configura√ß√£o TypeScript
‚îî‚îÄ‚îÄ README.md               # Documenta√ß√£o b√°sica
</code>`<code>

<h3>4.2 Contagem de Arquivos</h3>

- <strong>P√°ginas</strong>: 9 arquivos
- <strong>Componentes</strong>: 21 componentes customizados + 49 componentes UI = <strong>70 componentes</strong>
- <strong>Hooks</strong>: 5 custom hooks
- <strong>Contextos</strong>: 1 contexto principal
- <strong>Scripts SQL</strong>: ~30 arquivos de migra√ß√£o e configura√ß√£o

---

<h2>5. Componentes Principais</h2>

<h3>5.1 P√°ginas</h3>

#<h3></code>Index.tsx<code> - P√°gina Inicial</h3>
- <strong>Prop√≥sito</strong>: Landing page com hero banner e preview de trabalhos
- <strong>Funcionalidades</strong>:
  - Hero carousel com imagens em destaque
  - Se√ß√£o "Sobre"
  - Preview de fotografias e projetos de design
  - CTA para servi√ßos

#<h3></code>Photography.tsx<code> - Galeria de Fotografias</h3>
- <strong>Prop√≥sito</strong>: Exibir portf√≥lio fotogr√°fico completo  
- <strong>Funcionalidades</strong>:
  - Filtros por categoria (retratos, urbano, natureza, arte, eventos)
  - Busca por t√≠tulo, descri√ß√£o, tags
  - Lightbox para visualiza√ß√£o ampliada
  - Sistema de likes, compartilhamentos e coment√°rios
  - Exibi√ß√£o de metadados EXIF
  - Prote√ß√£o contra download

#<h3></code>GraphicDesign.tsx<code> - Portf√≥lio de Design</h3>
- <strong>Prop√≥sito</strong>: Showcase de projetos de design gr√°fico
- <strong>Funcionalidades</strong>:
  - Filtros por categoria
  - Modal de projeto com m√∫ltiplas imagens
  - Informa√ß√µes do cliente e ano
  - Sistema de intera√ß√£o social

#<h3></code>Admin.tsx<code> - Painel Administrativo</h3>
- <strong>Prop√≥sito</strong>: Gerenciamento de conte√∫do (CRUD)
- <strong>Funcionalidades</strong>:
  - Autentica√ß√£o via Supabase Auth
  - Upload de fotografias com extra√ß√£o autom√°tica de EXIF  
  - Upload de projetos de design (m√∫ltiplas imagens)
  - Gerenciamento de imagens hero
  - Modera√ß√£o de coment√°rios
  - Gerenciamento de conte√∫do do site
  - Batch upload (upload em lote)
  - Interface traduzida para PT-BR

<h3>5.2 Componentes de UI</h3>

#<h3></code>Navigation.tsx<code> - Navega√ß√£o Principal</h3>
</code>`<code>typescript
// Navega√ß√£o responsiva com menu mobile
- Links: Home, Photography, Design, About, Services, Contact
- Seletor de idioma
- Modo escuro/claro (via next-themes)
- Menu hamburger em mobile
</code>`<code>

#<h3></code>Hero.tsx<code> - Banner Hero</h3>
</code>`<code>typescript
// Carousel de imagens hero vindas do Supabase
- Auto-play
- Fade transition
- Controles de navega√ß√£o
- Imagens gerenciadas via Admin
</code>`<code>

#<h3></code>PhotoGrid.tsx<code> - Grade de Fotos</h3>
</code>`<code>typescript
// Grid responsivo de fotografias
- Layout Masonry/Grid
- Lazy loading de imagens
- Click para lightbox
- Exibi√ß√£o de categoria e t√≠tulo
- Intera√ß√£o: likes, comments, shares
</code>`<code>

#<h3></code>CommentsSection.tsx<code> - Sistema de Coment√°rios</h3>
</code>`<code>typescript
// √Årea de coment√°rios com modera√ß√£o
- Form para novo coment√°rio
- Lista de coment√°rios aprovados
- Suporte a respostas (threads)
- Indicador de coment√°rio do admin
- Aprova√ß√£o necess√°ria antes de exibi√ß√£o p√∫blica
</code>`<code>

#<h3></code>ProtectedImage.tsx<code> - Prote√ß√£o de Imagens</h3>
</code>`<code>typescript
// Componente que protege imagens contra download
- Desabilita click direito
- Previne arrastar imagem
- Watermark opcional
- Mensagem de prote√ß√£o
</code>`<code>

#<h3></code>Lightbox.tsx<code> - Visualizador de Imagens</h3>
</code>`<code>typescript
// Modal para visualiza√ß√£o ampliada
- Navega√ß√£o entre imagens
- Zoom
- Exibi√ß√£o de metadados (EXIF, t√≠tulo, descri√ß√£o)
- Fechar com ESC ou click fora
</code>`<code>

#<h3></code>InteractionBar.tsx<code> - Barra de Intera√ß√£o</h3>
</code>`<code>typescript
// Bot√µes de like, share, comment
- Contadores em tempo real
- Anima√ß√µes ao clicar
- Persist√™ncia no banco de dados
</code>`<code>

<h3>5.3 Componentes Admin</h3>

#<h3></code>BatchUpload.tsx<code> - Upload em Lote</h3>
- Upload m√∫ltiplo de arquivos
- Extra√ß√£o autom√°tica de EXIF  
- Preview de imagens
- Progress bar
- Valida√ß√£o de tipos de arquivo

#<h3></code>AllCommentsManagement.tsx<code> - Gerenciamento de Coment√°rios</h3>
- Lista todos os coment√°rios (aprovados e pendentes)
- Filtros por status
- Deletar coment√°rios
- Responder como admin
- Exibi√ß√£o de threads (respostas aninhadas)

---

<h2>6. Hooks Customizados</h2>

<h3>6.1 </code>useSupabaseData.ts<code></h3>

Hook principal para integra√ß√£o com Supabase. Fornece fun√ß√µes para buscar e manipular dados.

</code>`<code>typescript
// Principais exports:

// 1. usePhotography - Buscar fotografias
const { photos, loading, refresh } = usePhotography(category?: string)

// 2. useDesignProjects - Buscar projetos de design
const { projects, loading, refresh } = useDesignProjects(category?: string)

// 3. useComments - Gerenciar coment√°rios de um item
const { comments, loading, addComment, refresh } = useComments(
  itemId: string, 
  type: 'photography' | 'design'
)

// 4. useAuth - Autentica√ß√£o
const { user, loading, signIn, signOut } = useAuth()

// 5. useAdminComments - Modera√ß√£o de coment√°rios (admin)
const { pendingComments, loading, approveComment, rejectComment, refresh } = useAdminComments()

// 6. useAllComments - Todos os coment√°rios (admin)
const { allComments, loading, refresh } = useAllComments()

// 7. useTopRated - Rankings
const { topPhotos, topProjects, loading } = useTopRated(limit?)

// Fun√ß√µes auxiliares:
incrementLikes(id: string, type: 'photography' | 'design')
incrementShares(id: string, type: 'photography' | 'design')
deleteComment(id: string)
addReply(parentId: string, content: string, itemId: string, type)
</code>`<code>

<strong>Implementa√ß√£o</strong>:
- 368 linhas de c√≥digo
- 25 fun√ß√µes/hooks exportados
- Integra√ß√£o com Row Level Security (RLS)
- Tratamento de erros
- Shuffle algorithm para randomiza√ß√£o

<h3>6.2 </code>useImageProtection.ts<code></h3>

Protege imagens contra download n√£o autorizado.

</code>`<code>typescript
const useImageProtection = () => {
  // Previne click direito em imagens
  // Previne arrastar imagens
  // Adiciona event listeners em mount
  // Remove em unmount
}
</code>`<code>

<h3>6.3 </code>useSearch.ts<code></h3>

Implementa funcionalidade de busca.

</code>`<code>typescript
const useSearch = (items: T[], searchKeys: (keyof T)[]) => {
  const [searchTerm, setSearchTerm] = useState('')
  const filteredItems = // ... l√≥gica de filtro
  
  return { searchTerm, setSearchTerm, filteredItems }
}
</code>`<code>

<h3>6.4 </code>use-toast.ts<code></h3>

Sistema de notifica√ß√µes toast (shadcn/ui).

<h3>6.5 </code>use-mobile.tsx<code></h3>

Detecta se est√° em dispositivo m√≥vel via media query.

---

<h2>7. Backend e Banco de Dados</h2>

<h3>7.1 Configura√ß√£o Supabase</h3>

<strong>URL do Projeto</strong>: Configurado via vari√°vel de ambiente </code>VITE_SUPABASE_URL<code>  
<strong>Anon Key</strong>: Configurado via </code>VITE_SUPABASE_ANON_KEY<code>

<h3>7.2 Schema do Banco de Dados</h3>

#<h3>Tabela: </code>photography<code></h3>

</code>`<code>sql
CREATE TABLE photography (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  category TEXT CHECK (category IN ('portraits', 'urban', 'nature', 'art', 'events')),
  url TEXT NOT NULL,
  description TEXT,
  year INTEGER,
  event_name TEXT,
  event_date DATE,
  tags TEXT[],
  
  -- Metadados EXIF
  camera_make TEXT,
  camera_model TEXT,
  lens_model TEXT,
  iso INTEGER,
  aperture TEXT,
  shutter_speed TEXT,
  focal_length TEXT,
  capture_date TIMESTAMP,
  
  -- Contadores sociais
  likes_count INTEGER DEFAULT 0,
  comments_count INTEGER DEFAULT 0,
  shares_count INTEGER DEFAULT 0,
  
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
</code>`<code>

#<h3>Tabela: </code>design_projects<code></h3>

</code>`<code>sql
CREATE TABLE design_projects (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title TEXT NOT NULL,
  category TEXT CHECK (category IN ('branding', 'editorial', 'web', 'illustration', 'packaging')),
  description TEXT NOT NULL,
  images TEXT[] NOT NULL,  -- Array de URLs
  client TEXT,
  year INTEGER,
  link TEXT,
  event_name TEXT,
  event_date DATE,
  tags TEXT[],
  
  -- Contadores sociais
  likes_count INTEGER DEFAULT 0,
  comments_count INTEGER DEFAULT 0,
  shares_count INTEGER DEFAULT 0,
  
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
</code>`<code>

#<h3>Tabela: </code>comments<code></h3>

</code>`<code>sql
CREATE TABLE comments (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  content TEXT NOT NULL,
  user_name TEXT NOT NULL DEFAULT 'Anonymous',
  photo_id UUID REFERENCES photography(id) ON DELETE CASCADE,
  project_id UUID REFERENCES design_projects(id) ON DELETE CASCADE,
  parent_id UUID REFERENCES comments(id) ON DELETE CASCADE,  -- Para respostas
  approved BOOLEAN DEFAULT FALSE,
  is_admin BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);
</code>`<code>

#<h3>Tabela: </code>hero_images<code></h3>

</code>`<code>sql
CREATE TABLE hero_images (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  url TEXT NOT NULL,
  title TEXT NOT NULL,
  active BOOLEAN DEFAULT TRUE,
  page TEXT,  -- 'home', 'photography', 'design', etc.
  created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()
);
</code>`<code>

<h3>7.3 Row Level Security (RLS) Policies</h3>

#<h3>Leitura P√∫blica</h3>
Todas as tabelas permitem leitura p√∫blica para exibi√ß√£o no site:

</code>`<code>sql
CREATE POLICY "Permitir leitura p√∫blica"
ON [table_name] FOR SELECT
USING (true);
</code>`<code>

#<h3>Escrita Apenas para Autenticados</h3>
Inser√ß√£o, atualiza√ß√£o e dele√ß√£o requerem autentica√ß√£o:

</code>`<code>sql
CREATE POLICY "Apenas autenticados podem inserir"
ON [table_name] FOR INSERT
WITH CHECK (auth.role() = 'authenticated');

CREATE POLICY "Apenas autenticados podem atualizar"
ON [table_name] FOR UPDATE
USING (auth.role() = 'authenticated');

CREATE POLICY "Apenas autenticados podem deletar"
ON [table_name] FOR DELETE
USING (auth.role() = 'authenticated');
</code>`<code>

#<h3>Coment√°rios - Aprova√ß√£o</h3>
</code>`<code>sql
-- Apenas coment√°rios aprovados s√£o vis√≠veis publicamente
CREATE POLICY "Leitura apenas coment√°rios aprovados"
ON comments FOR SELECT
USING (approved = TRUE OR auth.role() = 'authenticated');
</code>`<code>

<h3>7.4 Storage (Buckets)</h3>

#<h3>Bucket: </code>photography<code></h3>
- <strong>Visibilidade</strong>: P√∫blico
- <strong>Prop√≥sito</strong>: Armazenar imagens de fotografia
- <strong>Pol√≠ticas</strong>:
  - Leitura p√∫blica: Permitida
  - Upload: Apenas autenticados
  - Dele√ß√£o: Apenas autenticados

#<h3>Bucket: </code>design<code></h3>
- <strong>Visibilidade</strong>: P√∫blico
- <strong>Prop√≥sito</strong>: Armazenar imagens de projetos de design
- <strong>Pol√≠ticas</strong>: Id√™nticas ao bucket </code>photography<code>

#<h3>Bucket: </code>hero<code></h3>
- <strong> Visibilidade</strong>: P√∫blico
- <strong>Prop√≥sito</strong>: Armazenar imagens para banners hero
- <strong>Pol√≠ticas</strong>: Id√™nticas aos demais

<h3>7.5 Triggers e Functions</h3>

#<h3>Trigger: Atualizar Contador de Coment√°rios</h3>
</code>`<code>sql
CREATE OR REPLACE FUNCTION update_comment_count()
RETURNS TRIGGER AS $$
BEGIN
  -- Ao aprovar/adicionar coment√°rio, incrementa contador na tabela pai
  -- Implementa√ß√£o autom√°tica via trigger
END;
$$ LANGUAGE plpgsql;
</code>`<code>

---

<h2>8. Funcionalidades Implementadas</h2>

<h3>8.1 Sistema de Autentica√ß√£o</h3>
- Login de administrador via email/senha
- Sess√£o persistente
- Prote√ß√£o de rotas administrativas
- Logout

<h3>8.2 Gerenciamento de Fotografias</h3>
- ‚úÖ Upload de fotos individuais
- ‚úÖ Batch upload (m√∫ltiplas fotos)
- ‚úÖ Extra√ß√£o autom√°tica de metadados EXIF
- ‚úÖ Categoriza√ß√£o (portraits, urban, nature, art, events)
- ‚úÖ Adi√ß√£o manual de tags, eventos, descri√ß√µes
- ‚úÖ Edi√ß√£o de metadados
- ‚úÖ Dele√ß√£o de fotos
- ‚úÖ Exibi√ß√£o em galeria com filtros

<h3>8.3 Gerenciamento de Projetos de Design</h3>
- ‚úÖ Upload de projetos com m√∫ltiplas imagens
- ‚úÖ Categoriza√ß√£o (branding, editorial, web, illustration, packaging)
- ‚úÖ Informa√ß√µes de cliente e ano
- ‚úÖ Links externos
- ‚úÖ Edi√ß√£o e dele√ß√£o

<h3>8.4 Sistema de Coment√°rios</h3>
- ‚úÖ Coment√°rios an√¥nimos ou com nome
- ‚úÖ Modera√ß√£o (aprova√ß√£o manual)
- ‚úÖ Respostas do admin
- ‚úÖ Threads (respostas aninhadas)
- ‚úÖ Dele√ß√£o de coment√°rios
- ‚úÖ Filtros por status (aprovados/pendentes)
- ‚úÖ Contador de coment√°rios atualizado automaticamente

<h3>8.5 Sistema  de Intera√ß√£o Social</h3>
- ‚úÖ Curtidas (likes) em fotos e projetos
- ‚úÖ Compartilhamentos  
- ‚úÖ Contadores em tempo real
- ‚úÖ Persist√™ncia no banco de dados

<h3>8.6 Ranking de Trabalhos</h3>
- ‚úÖ Top trabalhos por likes
- ‚úÖ Top trabalhos por coment√°rios
- ‚úÖ Top trabalhos por engajamento total
- ‚úÖ Exibi√ß√£o diferenciada

<h3>8.7 Prote√ß√£o de Imagens</h3>
- ‚úÖ Desabilitar click direito
- ‚úÖ Prevenir arrastar imagem
- ‚úÖ Mensagens de prote√ß√£o

<h3>8.8 Busca e Filtros</h3>
- ‚úÖ Busca por t√≠tulo, descri√ß√£o, tags
- ‚úÖ Filtros por categoria
- ‚úÖ Busca em tempo real

<h3>8.9 Internacionaliza√ß√£o</h3>
- ‚úÖ Suporte a PT-BR e EN
- ‚úÖ Contexto de idioma
- ‚úÖ Seletor de idioma no header

<h3>8.10 SEO</h3>
- ‚úÖ Meta tags din√¢micas por p√°gina
- ‚úÖ Open Graph para redes sociais
- ‚úÖ Sitemap
- ‚úÖ Tags can√¥nicas

<h3>8.11 Responsividade</h3>
- ‚úÖ Design mobile-first
- ‚úÖ Breakpoints Tailwind
- ‚úÖ Menu hamburger em mobile
- ‚úÖ Grids adaptativas

---

<h2>9. Configura√ß√£o e Deploy</h2>

<h3>9.1 Requisitos</h3>

- Node.js 18+ e npm
- Conta na Supabase
- Git

<h3>9.2 Instala√ß√£o Local</h3>

</code>`<code>bash
# Clone o reposit√≥rio
git clone <repository_url>
cd Portifolio

# Instale depend√™ncias
npm install

# Configure vari√°veis de ambiente
cp .env.example .env
# Edite .env com suas credenciais Supabase

# Inicie servidor de desenvolvimento
npm run dev

# Build para produ√ß√£o
npm run build

# Preview da build de produ√ß√£o
npm run preview
</code>`<code>

<h3>9.3 Vari√°veis de Ambiente</h3>

Arquivo </code>.env<code>:
</code>`<code>env
VITE_SUPABASE_URL=https://seu-projeto.supabase.co
VITE_SUPABASE_ANON_KEY=sua_anon_key_aqui
</code>`<code>

<h3>9.4 Scripts Dispon√≠veis</h3>

</code>`<code>json
{
  "dev": "vite",                    // Dev server
  "build": "vite build",             // Build produ√ß√£o
  "build:dev": "vite build --mode development",
  "lint": "eslint .",                // Lint c√≥digo
  "preview": "vite preview"          // Preview build
}
</code>`<code>

<h3>9.5 Deploy</h3>

#<h3>Vercel (Recomendado)</h3>
1. Conecte reposit√≥rio no Vercel
2. Configure vari√°veis de ambiente
3. Deploy autom√°tico

#<h3>Netlify</h3>
1. Conecte reposit√≥rio no Netlify
2. Build command: </code>npm run build<code>
3. Publish directory: </code>dist<code>
4. Configure vari√°veis de ambiente

<h3>9.6 Configura√ß√£o do Supabase</h3>

Ver arquivo </code>SUPABASE_SETUP.md<code> para guia detalhado passo-a-passo.

<strong>Resumo</strong>:
1. Criar projeto no Supabase
2. Executar scripts SQL para criar tabelas
3. Configurar buckets de storage
4. Aplicar RLS policies
5. Criar usu√°rio admin
6. Copiar credenciais para </code>.env<code>

---

<h2>10. Hist√≥rico de Desenvolvimento</h2>

<h3>Fase 1: Estrutura Inicial</h3>
- Setup do projeto com Vite + React + TypeScript
- Configura√ß√£o Tailwind CSS
- Instala√ß√£o shadcn/ui
- Estrutura de rotas (React Router)
- P√°ginas b√°sicas (Home, Photography, Design, About)

<h3>Fase 2: Integra√ß√£o Supabase</h3>
- Cria√ß√£o de conta e projeto no Supabase
- Configura√ß√£o de tabelas (</code>photography<code>, </code>design_projects<code>)
- Implementa√ß√£o de hooks (</code>useSupabaseData.ts<code>)
- Sistema de upload de imagens
- Configura√ß√£o de storage buckets

<h3>Fase 3: Painel Administrativo</h3>
- P√°gina Admin com autentica√ß√£o
- CRUD de fotografias
- CRUD de projetos de design
- Sistema de batch upload
- Gerenciamento de imagens hero
- Extra√ß√£o autom√°tica de EXIF

<h3>Fase 4: Sistema de Coment√°rios</h3>
- Tabela de coment√°rios no Supabase
- Componente CommentsSection
- Sistema de modera√ß√£o (aprova√ß√£o)
- Respostas do admin
- Threads (respostas aninhadas)
- Painel de gerenciamento de coment√°rios

<h3>Fase 5: Intera√ß√µes Sociais</h3>
- Sistema de likes (curtidas)
- Sistema de shares (compartilhamentos)
- Contadores em tempo real
- Triggers para atualizar contadores
- Ranking de trabalhos mais curtidos

<h3>Fase 6: Prote√ß√£o e SEO</h3>
- Prote√ß√£o de imagens contra download
- Meta tags din√¢micas  
- SEO por p√°gina
- Open Graph tags

<h3>Fase 7: Internacionaliza√ß√£o</h3>
- Contexto de idioma (PT-BR/EN)
- Tradu√ß√£o de componentes
- Seletor de idioma

<h3>Fase 8: Tradu√ß√£o do Admin</h3>
- Tradu√ß√£o completa do painel para PT-BR
- Cabe√ßalho e navega√ß√£o
- Formul√°rios e labels
- Mensagens de feedback

<h3>Fase 9: Refinamentos Finais</h3>
- Melhorias de UX
- Responsividade mobile
- Performance otimizations
- Bug fixes

---

<h2>üìä Estat√≠sticas do Projeto</h2>

| M√©trica | Valor |
|---------|-------|
| <strong>P√°ginas</strong> | 9 |
| <strong>Componentes Customizados</strong> | 21 |
| <strong>Componentes shadcn/ui</strong> | 49 |
| <strong>Hooks Customizados</strong> | 5 |
| <strong>Linhas de C√≥digo (estimado)</strong> | ~15.000+ |
| <strong>Depend√™ncias NPM</strong> | 56 |
| <strong>Depend√™ncias Dev</strong> | 12 |
| <strong>Tabelas no Banco</strong> | 4 principais |
| <strong>Buckets de Storage</strong> | 3 |
| <strong>Scripts SQL</strong> | ~30 |

---

<h2>üîí Seguran√ßa</h2>

<h3>Implementa√ß√µes de Seguran√ßa</h3>

1. <strong>Row Level Security (RLS)</strong>: Todas as tabelas protegidas
2. <strong>Autentica√ß√£o</strong>: Apenas usu√°rios autenticados podem administrar
3. <strong>Valida√ß√£o de Upload</strong>: Tipos de arquivo permitidos
4. <strong>Sanitiza√ß√£o</strong>: Inputs sanitizados antes de inserir no DB
5. <strong>Environment Variables</strong>: Credenciais n√£o commitadas
6. <strong>HTTPS</strong>: Comunica√ß√£o criptografada com Supabase

---

<h2>üöÄ Performance</h2>

<h3>Otimiza√ß√µes Implementadas</h3>

1. <strong>Lazy Loading</strong>: Imagens carregadas sob demanda
2. <strong>Code Splitting</strong>: Rotas separadas em chunks
3. <strong>Vite Build</strong>: Build otimizado para produ√ß√£o
4. <strong>Tailwind Purge</strong>: CSS n√£o utilizado removido
5. <strong>Image Compression</strong>: Imagens comprimidas no upload
6. <strong>Caching</strong>: Estrat√©gias de cache no Supabase

---

<h2>üì± Responsividade</h2>

<h3>Breakpoints</h3>

- <strong>Mobile</strong>: < 640px
- <strong>Tablet</strong>: 640px - 1024px
- <strong>Desktop</strong>: > 1024px

<h3>Recursos Mobile</h3>

- Menu hamburger
- Touch gestures
- Grids adaptativas
- Imagens otimizadas por resolu√ß√£o

---

<h2>üé® Design System</h2>

<h3>Cores (Tailwind)</h3>

Configuradas em </code>tailwind.config.ts<code>:
- Primary: Definido no tema
- Secondary: Definido no tema
- Accent: Neon/vibrante para CTAs
- Background/Foreground: Suporte dark mode

<h3>Tipografia</h3>

- <strong>Font Display</strong>: Para t√≠tulos
- <strong>Font Sans</strong>: Para corpo do texto
- <strong>Font Mono</strong>: Para c√≥digo/metadados

<h3>Componentes UI</h3>

Todos os componentes s√£o do shadcn/ui baseados em Radix UI:
- Accordion, Alert Dialog, Avatar, Button, Card, Checkbox, Dialog
- Dropdown Menu, Input, Label, Select, Tabs, Textarea, Toast
- E mais 40+ componentes

---

<h2>üîÑ Estado Futuro / Roadmap</h2>

<h3>Melhorias Planejadas</h3>

- [ ] PWA (Progressive Web App)
- [ ] Otimiza√ß√£o de imagens com Next/Image ou similar
- [ ] Sistema de favoritos para visitantes
- [ ] Blog integrado
- [ ] Admin: analytics de visualiza√ß√µes
- [ ] Galeria em fullscreen
- [ ] Compara√ß√£o antes/depois para edi√ß√µes
- [ ] Suporte a v√≠deos
- [ ] Newsletter integration

---

<h2>üìö Recursos e Documenta√ß√£o</h2>

<h3>Documenta√ß√£o Externa</h3>

- <a href="https://react.dev/">React Documentation</a>
- <a href="https://vitejs.dev/">Vite Documentation</a>
- <a href="https://supabase.com/docs">Supabase Docs</a>
- <a href="https://tailwindcss.com/docs">Tailwind CSS Docs</a>
- <a href="https://ui.shadcn.com/">shadcn/ui</a>

<h3>Documenta√ß√£o Interna</h3>

- </code>README.md<code>: Guia b√°sico
- </code>SUPABASE_SETUP.md<code>: Configura√ß√£o detalhada do backend
- </code>COMMENT_COUNT_SYSTEM.md<code>: Sistema de contadores de coment√°rios

---

<h2>üë®‚Äçüíª Autor</h2>

<strong>Tiago Damasceno</strong>  
Fot√≥grafo e Designer Gr√°fico

---

<h2>üìÑ Licen√ßa</h2>

Projeto propriet√°rio. Todos os direitos reservados.

---

<strong>Documenta√ß√£o gerada em</strong>: 30 de Novembro de 2025  
<strong>Vers√£o</strong>: 1.0.0  
<strong>√öltima atualiza√ß√£o</strong>: Tradu√ß√£o do painel administrativo para PT-BR

---

*Esta documenta√ß√£o foi gerada automaticamente a partir do c√≥digo-fonte e arquivos de configura√ß√£o do projeto.*
# Guia T√©cnico Detalhado e Orienta√ß√µes
<h2>Portfolio de Fotografia - Ferramentas e Implementa√ß√µes</h2>

---

<h2>üìã √çndice</h2>

1. <a href="#1-vis√£o-geral-das-escolhas-tecnol√≥gicas">Vis√£o Geral das Escolhas Tecnol√≥gicas</a>
2. <a href="#2-frontend---ferramentas-e-justificativas">Frontend - Ferramentas e Justificativas</a>
3. <a href="#3-backend---supabase-em-detalhes">Backend - Supabase em Detalhes</a>
4. <a href="#4-bibliotecas-especializadas">Bibliotecas Especializadas</a>
5. <a href="#5-implementa√ß√µes-customizadas">Implementa√ß√µes Customizadas</a>
6. <a href="#6-padr√µes-de-c√≥digo-e-best-practices">Padr√µes de C√≥digo e Best Practices</a>
7. <a href="#7-guias-de-implementa√ß√£o-espec√≠ficos">Guias de Implementa√ß√£o Espec√≠ficos</a>

---

<h2>1. Vis√£o Geral das Escolhas Tecnol√≥gicas</h2>

<h3>1.1 Filosofia de Desenvolvimento</h3>

<strong>Princ√≠pios Seguidos</strong>:
- <strong>Developer Experience (DX)</strong>: Ferramentas que aceleram desenvolvimento
- <strong>Performance First</strong>: Build otimizado e carregamento r√°pido
- <strong>Type Safety</strong>: TypeScript em todo projeto
- <strong>Component Reusability</strong>: Componentes pequenos e reutiliz√°veis
- <strong>Backend as a Service</strong>: Foco no frontend, backend gerenciado
- <strong>Modern Best Practices</strong>: React Hooks, functional components

---

<h2>2. Frontend - Ferramentas e Justificativas</h2>

<h3>2.1 React 18.3.1</h3>

<strong>Por que React?</strong>
- ‚úÖ <strong>Ecossistema Maduro</strong>: Maior biblioteca de componentes do mercado
- ‚úÖ <strong>Performance</strong>: Virtual DOM e reconcilia√ß√£o eficiente
- ‚úÖ <strong>Hooks</strong>: L√≥gica reutiliz√°vel sem classes
- ‚úÖ <strong>Comunidade</strong>: Suporte massivo, documenta√ß√£o extensa
- ‚úÖ <strong>Hiring</strong>: Facilidade de encontrar desenvolvedores

<strong>Orienta√ß√µes de Uso no Projeto</strong>:
</code>`<code>typescript
// SEMPRE use functional components com hooks
const MyComponent = () => {
  const [state, setState] = useState(initialValue)
  
  useEffect(() => {
    // Side effects aqui
  }, [dependencies])
  
  return <div>{/* JSX */}</div>
}

// EVITE class components
</code>`<code>

<strong>Implementa√ß√µes-Chave</strong>:
- <strong>Hooks Customizados</strong>: Toda l√≥gica de neg√≥cio em hooks reutiliz√°veis
- <strong>Context API</strong>: Gerenciamento de estado global (idioma)
- <strong>Lazy Loading</strong>: Componentes carregados apenas quando necess√°rios

---

<h3>2.2 TypeScript 5.8.3</h3>

<strong>Por que TypeScript?</strong>
- ‚úÖ <strong>Type Safety</strong>: Erros detectados em tempo de compila√ß√£o
- ‚úÖ <strong>IntelliSense</strong>: Autocompleta√ß√£o inteligente na IDE
- ‚úÖ <strong>Refactoring</strong>: Mudan√ßas seguras em toda codebase
- ‚úÖ <strong>Documentation</strong>: Tipos servem como documenta√ß√£o viva
- ‚úÖ <strong>Escalabilidade</strong>: Projeto cresce sem perder controle

<strong>Orienta√ß√µes de Uso</strong>:
</code>`<code>typescript
// ‚úÖ BOM: Interfaces expl√≠citas
interface PhotographyItem {
  id: string
  title: string
  category: 'portraits' | 'urban' | 'nature' | 'art' | 'events'
  url: string
}

// ‚úÖ BOM: Tipagem de fun√ß√µes
async function uploadPhoto(file: File): Promise<string> {
  // implementa√ß√£o
}

// ‚ùå EVITE: any
const data: any = await fetch() // MAU!

// ‚úÖ MELHOR: Tipos espec√≠ficos
const data: PhotographyItem[] = await fetch()
</code>`<code>

<strong>Implementa√ß√µes no Projeto</strong>:
- <strong>src/lib/supabase.ts</strong>: Interfaces definindo estrutura do DB
- <strong>Strict Mode</strong>: </code>tsconfig.json<code> com configura√ß√£o estrita
- <strong>Type Guards</strong>: Valida√ß√µes de tipo em runtime quando necess√°rio

---

<h3>2.3 Vite 5.4.19</h3>

<strong>Por que Vite (ao inv√©s de Create React App ou Webpack)?</strong>
- ‚úÖ <strong>Velocidade</strong>: Dev server instant√¢neo com ES modules nativos
- ‚úÖ <strong>Hot Module Replacement (HMR)</strong>: Atualiza√ß√µes instant√¢neas
- ‚úÖ <strong>Build Otimizado</strong>: Rollup para produ√ß√£o = bundle menor
- ‚úÖ <strong>Simples</strong>: Zero config para maioria dos casos
- ‚úÖ <strong>Moderno</strong>: Suporta todas as features ES modernas

<strong>Compara√ß√£o de Performance</strong>:
| Ferramenta | Startup (cold) | HMR |
|------------|----------------|-----|
| CRA | ~30s | ~1s |
| Webpack | ~20s | ~500ms |
| <strong>Vite</strong> | <strong>~500ms</strong> | <strong>~50ms</strong> |

<strong>Configura√ß√£o Customizada</strong> (</code>vite.config.ts<code>):
</code>`<code>typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react-swc'
import path from 'path'

export default defineConfig({
  plugins: [react()], // SWC = compila√ß√£o 20x mais r√°pida
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src') // Imports absolutos
    }
  },
  server: {
    port: 8080 // Porta customizada
  }
})
</code>`<code>

<strong>Benef√≠cios Observados</strong>:
- Server reinicia em < 1 segundo
- Mudan√ßas refletem instantaneamente no browser
- Build de produ√ß√£o 60% menor que Webpack

---

<h3>2.4 Tailwind CSS 3.4.17</h3>

<strong>Por que Tailwind (ao inv√©s de CSS-in-JS ou Styled Components)?</strong>
- ‚úÖ <strong>Utility-First</strong>: Classes pequenas e compon√≠veis
- ‚úÖ <strong>  Bundle Size</strong>: CSS n√£o usado √© removido (tree-shaking)
- ‚úÖ <strong>Consist√™ncia</strong>: Design system built-in
- ‚úÖ <strong>Velocidade</strong>: N√£o escreve CSS customizado, usa classes prontas
- ‚úÖ <strong>Responsive</strong>: Breakpoints simples (</code>md:<code>, </code>lg:<code>)
- ‚úÖ <strong>Dark Mode</strong>: Suporte nativo

<strong>Configura√ß√£o Customizada</strong> (</code>tailwind.config.ts<code>):
</code>`<code>typescript
export default {
  darkMode: ['class'], // Dark mode via classe
  content: [
    './pages/**/*.{ts,tsx}',
    './components/**/*.{ts,tsx}',
    './app/**/*.{ts,tsx}',
    './src/**/*.{ts,tsx}'
  ],
  theme: {
    extend: {
      colors: {
        border: 'hsl(var(--border))',
        // ... cores do shadcn/ui
      },
      fontFamily: {
        // Fontes customizadas
      },
      animation: {
        // Anima√ß√µes customizadas
      }
    }
  },
  plugins: [
    require('tailwindcss-animate'),
    require('@tailwindcss/typography')
  ]
}
</code>`<code>

<strong>Exemplos de Uso no Projeto</strong>:
</code>`<code>tsx
// ‚úÖ Responsive + Dark Mode
<div className="
  grid grid-cols-1           // Mobile: 1 coluna
  md:grid-cols-2             // Tablet: 2 colunas
  lg:grid-cols-3             // Desktop: 3 colunas
  gap-6                      // Espa√ßamento
  dark:bg-slate-900          // Fundo no dark mode
">
  {/* conte√∫do */}
</div>

// ‚úÖ Hover effects
<button className="
  bg-blue-600 
  hover:bg-blue-700          // Hover state
  transition-colors          // Transi√ß√£o suave
  duration-200
">
  Click me
</button>
</code>`<code>

---

<h3>2.5 shadcn/ui + Radix UI</h3>

<strong>Por que shadcn/ui (ao inv√©s de Material-UI ou Ant Design)?</strong>
- ‚úÖ <strong>Copy-Paste</strong>: Componentes copiados para seu projeto (n√£o NPM dependency)
- ‚úÖ <strong>Customiza√ß√£o</strong>: 100% customiz√°vel pois c√≥digo est√° no projeto
- ‚úÖ <strong>Acessibilidade</strong>: Built on Radix UI = WAI-ARIA compliant
- ‚úÖ <strong>Tailwind Native</strong>: Usa Tailwind, n√£o CSS-in-JS
- ‚úÖ <strong>Headless</strong>: L√≥gica separada de estilo

<strong>Componentes Utilizados</strong> (49 total):
- Dialog, Sheet, Popover: Modais e overlays
- Form, Input, Select, Textarea: Formul√°rios
- Toast: Notifica√ß√µes
- Tabs: Navega√ß√£o do Admin
- Card: Layout de conte√∫do
- Button: Call-to-actions
- Accordion: FAQ e se√ß√µes colaps√°veis
- ... e 40+ outros

<strong>Como Adicionar Novo Componente</strong>:
</code>`<code>bash
# Instala CLI do shadcn/ui
npx shadcn-ui@latest init

# Adiciona componente espec√≠fico
npx shadcn-ui@latest add dialog
npx shadcn-ui@latest add button

# Componente agora est√° em src/components/ui/
</code>`<code>

<strong>Exemplo de Customiza√ß√£o</strong>:
</code>`<code>tsx
// src/components/ui/button.tsx (gerado pelo shadcn)
// VOC√ä PODE EDITAR LIVREMENTE!

const buttonVariants = cva(
  "inline-flex items-center justify-center rounded-md...",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground",
        destructive: "bg-red-600 text-white", // ‚úÖ Customizado!
        // Adicione suas pr√≥prias variantes
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 px-3",
        lg: "h-11 px-8", // ‚úÖ Customizado!
      }
    }
  }
)
</code>`<code>

---

<h3>2.6 React Router DOM 6.30.1</h3>

<strong>Por que React Router?</strong>
- ‚úÖ <strong>Standard</strong>: Router mais usado no ecossistema React
- ‚úÖ <strong>Nested Routes</strong>: Rotas aninhadas f√°ceis
- ‚úÖ <strong>Lazy Loading</strong>: Code splitting por rota
- ‚úÖ <strong>Hooks</strong>: </code>useNavigate<code>, </code>useParams<code>, </code>useLocation<code>

<strong>Implementa√ß√£o</strong> (</code>src/App.tsx<code>):
</code>`<code>tsx
import { BrowserRouter, Routes, Route } from 'react-router-dom'

function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Index />} />
        <Route path="/photography" element={<Photography />} />
        <Route path="/design" element={<GraphicDesign />} />
        <Route path="/about" element={<AboutPage />} />
        <Route path="/admin" element={<Admin />} />
        <Route path="/contact" element={<Contact />} />
        <Route path="*" element={<NotFound />} /> {/* 404 */}
      </Routes>
    </BrowserRouter>
  )
}
</code>`<code>

<strong>Navega√ß√£o Program√°tica</strong>:
</code>`<code>typescript
import { useNavigate } from 'react-router-dom'

function MyComponent() {
  const navigate = useNavigate()
  
  const handleClick = () => {
    navigate('/photography') // Redireciona
  }
}
</code>`<code>

---

<h2>3. Backend - Supabase em Detalhes</h2>

<h3>3.1 Por que Supabase?</h3>

<strong>Compara√ß√£o com Alternativas</strong>:

| Feature | Supabase | Firebase | AWS Amplify | Backend Pr√≥prio |
|---------|----------|----------|-------------|-----------------|
| <strong>Tipo de DB</strong> | PostgreSQL | NoSQL | DynamoDB | Qualquer |
| <strong>Relacional</strong> | ‚úÖ Sim | ‚ùå N√£o | Limitado | ‚úÖ Sim |
| <strong>Open Source</strong> | ‚úÖ Sim | ‚ùå N√£o | Parcial | N/A |
| <strong>Self-Host</strong> | ‚úÖ Sim | ‚ùå N√£o | ‚ùå N√£o | ‚úÖ Sim |
| <strong>SQL Direto</strong> | ‚úÖ Sim | ‚ùå N√£o | ‚ùå N√£o | ‚úÖ Sim |
| <strong>Pricing</strong> | Generoso | Caro | M√©dio | Custo servidor |
| <strong>Learning Curve</strong> | Baixa | M√©dia | Alta | Alta |

<strong>Por que  escolhemos Supabase</strong>:
1. <strong>PostgreSQL</strong>: Banco relacional maduro e poderoso
2. <strong>Row Level Security</strong>: Seguran√ßa granular sem c√≥digo backend
3. <strong>Realtime</strong>: Subscriptions para updates em tempo real
4. <strong>Storage</strong>: Upload de arquivos built-in
5. <strong>Auth</strong>: Autentica√ß√£o completa out-of-the-box
6. <strong>SQL</strong>: Liberdade total para queries complexas
7. <strong>Open Source</strong>: Pode migrar para self-hosted se necess√°rio

---

<h3>3.2 Auth (Autentica√ß√£o)</h3>

<strong>Implementa√ß√£o</strong>:
</code>`<code>typescript
// src/hooks/useSupabaseData.ts

export function useAuth() {
  const [user, setUser] = useState(null)
  const [loading, setLoading] = useState(true)
  
  useEffect(() => {
    // Pega sess√£o atual
    supabase.auth.getSession().then(({ data: { session } }) => {
      setUser(session?.user ?? null)
      setLoading(false)
    })
    
    // Escuta mudan√ßas de auth
    const { data: { subscription } } = supabase.auth.onAuthStateChange(
      (_event, session) => {
        setUser(session?.user ?? null)
      }
    )
    
    return () => subscription.unsubscribe()
  }, [])
  
  const signIn = async (email: string, password: string) => {
    const { error } = await supabase.auth.signInWithPassword({
      email,
      password
    })
    return { error }
  }
  
  const signOut = async () => {
    await supabase.auth.signOut()
  }
  
  return { user, loading, signIn, signOut }
}
</code>`<code>

<strong>Uso no Admin</strong>:
</code>`<code>tsx
const Admin = () => {
  const { user, signIn, signOut } = useAuth()
  
  if (!user) {
    return <LoginForm onSubmit={signIn} />
  }
  
  return <AdminDashboard user={user} onLogout={signOut} />
}
</code>`<code>

<strong>Benef√≠cios</strong>:
- Sess√£o persistente (refresh tokens autom√°ticos)
- Seguro por padr√£o (bcrypt para senhas)
- Magic links, OAuth social (Google, GitHub) se necess√°rio

---

<h3>3.3 Row Level Security (RLS)</h3>

<strong>O que √© RLS?</strong>
Row Level Security permite definir pol√≠ticas de acesso a n√≠vel de linha no PostgreSQL. Cada query √© automaticamente filtrada pelas pol√≠ticas.

<strong>Exemplo Pr√°tico</strong>:
</code>`<code>sql
-- 1. Habilitar RLS na tabela
ALTER TABLE photography ENABLE ROW LEVEL SECURITY;

-- 2. Pol√≠tica: Qualquer um pode VER (SELECT)
CREATE POLICY "Leitura p√∫blica"
ON photography FOR SELECT
USING (true); -- true = sem restri√ß√µes

-- 3. Pol√≠tica: Apenas autenticados podem INSERIR
CREATE POLICY "Apenas admins inserem"
ON photography FOR INSERT
WITH CHECK (auth.role() = 'authenticated');

-- 4. Pol√≠tica: Apenas autenticados podem DELETAR
CREATE POLICY "Apenas admins deletam"
ON photography FOR DELETE
USING (auth.role() = 'authenticated');
</code>`<code>

<strong>Como Funciona</strong>:
</code>`<code>typescript
// Usu√°rio N√ÉO autenticado
const { data } = await supabase.from('photography').select('*')
// ‚úÖ Funciona! Pol√≠tica "Leitura p√∫blica" permite

await supabase.from('photography').insert({ title: 'Nova foto' })
// ‚ùå ERRO! Pol√≠tica "Apenas admins inserem" bloqueia

// Usu√°rio autenticado
await supabase.auth.signInWithPassword({ email, password })

await supabase.from('photography').insert({ title: 'Nova foto' })
// ‚úÖ Funciona! Agora auth.role() = 'authenticated'
</code>`<code>

<strong>Vantagens do RLS</strong>:
- ‚úÖ Seguran√ßa no banco, n√£o no c√≥digo
- ‚úÖ Imposs√≠vel burlar do cliente
- ‚úÖ C√≥digo do cliente mais simples

---

<h3>3.4 Storage (Buckets)</h3>

<strong>Implementa√ß√£o de Upload</strong>:
</code>`<code>typescript
// src/lib/supabase.ts

export async function uploadImage(
  bucket: string, 
  file: File
): Promise<string> {
  // 1. Gera nome √∫nico para arquivo
  const fileExt = file.name.split('.').pop()
  const fileName = </code>${Math.random().toString(36).substring(2)}.${fileExt}<code>
  
  // 2. Upload para bucket
  const { data, error } = await supabase.storage
    .from(bucket)
    .upload(fileName, file)
  
  if (error) throw error
  
  // 3. Pega URL p√∫blica
  const { data: { publicUrl } } = supabase.storage
    .from(bucket)
    .getPublicUrl(fileName)
  
  return publicUrl
}
</code>`<code>

<strong>Uso no Componente</strong>:
</code>`<code>typescript
const handleUpload = async (file: File) => {
  try {
    // Upload da imagem
    const url = await uploadImage(PHOTOGRAPHY_BUCKET, file)
    
    // Salva URL no banco
    await supabase.from('photography').insert({
      title: 'Nova Foto',
      url: url, // URL do storage
      category: 'urban'
    })
  } catch (error) {
    console.error('Upload falhou:', error)
  }
}
</code>`<code>

<strong>Pol√≠ticas de Storage</strong>:
</code>`<code>sql
-- Permitir leitura p√∫blica de imagens
CREATE POLICY "Leitura p√∫blica de imagens"
ON storage.objects FOR SELECT
USING (bucket_id = 'photography');

-- Apenas autenticados podem upload
CREATE POLICY "Upload apenas autenticados"
ON storage.objects FOR INSERT
WITH CHECK (
  bucket_id = 'photography' AND 
  auth.role() = 'authenticated'
);
</code>`<code>

---

<h2>4. Bibliotecas Especializadas</h2>

<h3>4.1 exifr - Extra√ß√£o de Metadados EXIF</h3>

<strong>Por que exifr?</strong>
- ‚úÖ <strong>Completo</strong>: Suporta todos os formados (JPEG, TIFF, HEIC)
- ‚úÖ <strong>R√°pido</strong>: Parser otimizado
- ‚úÖ <strong>Leve</strong>: ~50KB minified
- ‚úÖ <strong>Privacy</strong>: Pode desabilitar GPS

<strong>Implementa√ß√£o</strong> (</code>src/lib/exifExtractor.ts<code>):
</code>`<code>typescript
import exifr from 'exifr'

export async function extractExifData(file: File): Promise<ExifData> {
  const exif = await exifr.parse(file, {
    tiff: true,
    exif: true,
    gps: false // ‚ö†Ô∏è Desabilitado por privacidade!
  })
  
  if (!exif) return {}
  
  return {
    camera_make: exif.Make?.trim(),
    camera_model: exif.Model?.trim(),
    lens_model: exif.LensModel?.trim(),
    iso: exif.ISO,
    aperture: formatAperture(exif.FNumber),
    shutter_speed: formatShutterSpeed(exif.ExposureTime),
    focal_length: formatFocalLength(exif.FocalLength),
    capture_date: exif.DateTimeOriginal
  }
}

// Formata√ß√µes espec√≠ficas
function formatAperture(value?: number): string | undefined {
  if (!value) return undefined
  return </code>f/${value.toFixed(1)}<code> // f/2.8
}

function formatShutterSpeed(exposureTime?: number): string | undefined {
  if (!exposureTime) return undefined
  
  if (exposureTime >= 1) {
    return </code>${exposureTime}s<code> // 2s
  } else {
    const denominator = Math.round(1 / exposureTime)
    return </code>1/${denominator}s<code> // 1/250s
  }
}

function formatFocalLength(focalLength?: number): string | undefined {
  if (!focalLength) return undefined
  return </code>${Math.round(focalLength)}mm<code> // 50mm
}
</code>`<code>

<strong>Uso no Upload</strong>:
</code>`<code>tsx
const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {
  const file = e.target.files?.[0]
  if (!file) return
  
  // Extrai EXIF automaticamente
  const exifData = await extractExifData(file)
  
  // Preenche formul√°rio automaticamente
  setFormData({
    ...formData,
    file,
    description: formatExifAsDescription(exifData), // Descri√ß√£o formatada
    camera_make: exifData.camera_make,
    camera_model: exifData.camera_model,
    // ... outros campos
  })
}
</code>`<code>

<strong>Resultado no Admin</strong>:
Ao fazer upload de uma foto, o sistema automaticamente preenche:
</code>`<code>
üì∑ Canon EOS R5
üîç RF 24-70mm F2.8 L IS USM
‚öôÔ∏è 50mm  ‚Ä¢ f/2.8 ‚Ä¢ 1/250s ‚Ä¢ ISO 400
</code>`<code>

---

<h3>4.2 react-helmet-async - SEO</h3>

<strong>Por que react-helmet-async?</strong>
- ‚úÖ <strong>SEO</strong>: Meta tags din√¢micas por p√°gina
- ‚úÖ <strong>SSR Ready</strong>: Funciona com server-side rendering
- ‚úÖ <strong>Async</strong>: N√£o bloqueia render

<strong>Implementa√ß√£o</strong> (</code>src/components/SEO.tsx<code>):
</code>`<code>typescript
import { Helmet } from 'react-helmet-async'

interface SEOProps {
  title: string
  description: string
  image?: string
  url?: string
}

export function SEO({ title, description, image, url }: SEOProps) {
  const siteUrl = 'https://tiagodamasceno.com'
  const fullUrl = url ? </code>${siteUrl}${url}<code> : siteUrl
  const imageUrl = image || </code>${siteUrl}/og-image.png<code>
  
  return (
    <Helmet>
      {/* Title */}
      <title>{title} | Tiago Damasceno</title>
      
      {/* Meta tags b√°sicas */}
      <meta name="description" content={description} />
      
      {/* Open Graph (Facebook, LinkedIn) */}
      <meta property="og:type" content="website" />
      <meta property="og:url" content={fullUrl} />
      <meta property="og:title" content={title} />
      <meta property="og:description" content={description} />
      <meta property="og:image" content={imageUrl} />
      
      {/* Twitter Card */}
      <meta name="twitter:card" content="summary_large_image" />
      <meta name="twitter:title" content={title} />
      <meta name="twitter:description" content={description} />
      <meta name="twitter:image" content={imageUrl} />
      
      {/* Canonical */}
      <link rel="canonical" href={fullUrl} />
    </Helmet>
  )
}
</code>`<code>

<strong>Uso em P√°ginas</strong>:
</code>`<code>tsx
// src/pages/Photography.tsx

function Photography() {
  return (
    <>
      <SEO
        title="Fotografia"
        description="Confira meu portf√≥lio de fotografia profissional"
        url="/photography"
      />
      
      {/* Resto da p√°gina */}
    </>
  )
}
</code>`<code>

<strong>Resultado no HTML</strong>:
</code>`<code>html
<head>
  <title>Fotografia | Tiago Damasceno</title>
  <meta name="description" content="Confira meu portf√≥lio de fotografia profissional">
  <meta property="og:title" content="Fotografia">
  <!-- ... outras tags -->
</head>
</code>`<code>

---

<h3>4.3 embla-carousel-react - Carross√©is</h3>

<strong>Por que Embla?</strong>
- ‚úÖ <strong>Leve</strong>: 2KB gzipped
- ‚úÖ <strong>Touch/Swipe</strong>: Funciona perfeitamente em mobile
- ‚úÖ <strong>Plugins</strong>: Autoplay, Fade, etc.
- ‚úÖ <strong>Acess√≠vel</strong>: Keyboard navigation

<strong>Implementa√ß√£o</strong> (</code>src/components/Hero.tsx<code>):
</code>`<code>tsx
import useEmblaCarousel from 'embla-carousel-react'
import Autoplay from 'embla-carousel-autoplay'
import Fade from 'embla-carousel-fade'

export function Hero({ images }: { images: HeroImage[] }) {
  const [emblaRef] = useEmblaCarousel(
    { loop: true }, // Op√ß√µes
    [
      Autoplay({ delay: 5000, stopOnInteraction: false }),
      Fade() // Transi√ß√£o fade
    ]
  )
  
  return (
    <div className="embla" ref={emblaRef}>
      <div className="embla__container">
        {images.map((image) => (
          <div key={image.id} className="embla__slide">
            <img src={image.url} alt={image.title} />
          </div>
        ))}
      </div>
    </div>
  )
}
</code>`<code>

---

<h2>5. Implementa√ß√µes Customizadas</h2>

<h3>5.1 Prote√ß√£o de Imagens</h3>

<strong>Problema</strong>: Usu√°rios podem facilmente baixar imagens (click direito, arrastar)

<strong>Solu√ß√£o</strong> (</code>src/hooks/useImageProtection.ts<code>):
</code>`<code>typescript
export function useImageProtection() {
  useEffect(() => {
    // Prevenir click direito
    const handleContextMenu = (e: MouseEvent) => {
      e.preventDefault()
      alert('Imagem protegida!')
    }
    
    // Prevenir arrastar imagem
    const handleDragStart = (e: DragEvent) => {
      e.preventDefault()
    }
    
    document.addEventListener('contextmenu', handleContextMenu)
    document.addEventListener('dragstart', handleDragStart)
    
    return () => {
      document.removeEventListener('contextmenu', handleContextMenu)
      document.removeEventListener('dragstart', handleDragStart)
    }
  }, [])
}
</code>`<code>

<strong>Uso</strong>:
</code>`<code>tsx
function ProtectedImage({ src, alt }: Props) {
  useImageProtection() // ‚úÖ Prote√ß√£o ativada
  
  return (
    <img 
      src={src} 
      alt={alt}
      className="select-none" // Previne sele√ß√£o
      draggable={false} // Previne arrastar
    />
  )
}
</code>`<code>

<strong>Limita√ß√µes</strong>:
- ‚ö†Ô∏è N√£o √© 100% √† prova de bots
- ‚ö†Ô∏è Screenshot ainda √© poss√≠vel
- ‚ö†Ô∏è Chrome DevTools pode acessar

<strong>Melhorias Futuras</strong>:
- Watermark invis√≠vel
- Servir imagens de baixa resolu√ß√£o
- DRM para imagens premium

---

<h3>5.2 Sistema de Busca</h3>

<strong>Implementa√ß√£o</strong> (</code>src/hooks/useSearch.ts<code>):
</code>`<code>typescript
export function useSearch<T>(
  items: T[],
  searchKeys: (keyof T)[]
) {
  const [searchTerm, setSearchTerm] = useState('')
  
  const filteredItems = useMemo(() => {
    if (!searchTerm.trim()) return items
    
    const term = searchTerm.toLowerCase()
    
    return items.filter((item) => {
      return searchKeys.some((key) => {
        const value = item[key]
        
        if (typeof value === 'string') {
          return value.toLowerCase().includes(term)
        }
        
        if (Array.isArray(value)) {
          return value.some((v) => 
            String(v).toLowerCase().includes(term)
          )
        }
        
        return false
      })
    })
  }, [items, searchTerm, searchKeys])
  
  return { searchTerm, setSearchTerm, filteredItems }
}
</code>`<code>

<strong>Uso</strong>:
</code>`<code>tsx
function Photography() {
  const { photos } = usePhotography()
  const { searchTerm, setSearchTerm, filteredItems } = useSearch(
    photos,
    ['title', 'description', 'tags'] // Campos pesquis√°veis
  )
  
  return (
    <>
      <SearchBar value={searchTerm} onChange={setSearchTerm} />
      <PhotoGrid photos={filteredItems} />
    </>
  )
}
</code>`<code>

---

<h3>5.3 Internacionaliza√ß√£o (i18n)</h3>

<strong>Implementa√ß√£o</strong> (</code>src/contexts/LanguageContext.tsx<code>):
</code>`<code>typescript
type Language = 'pt-BR' | 'en'

const translations = {
  'pt-BR': {
    'nav.home': 'In√≠cio',
    'nav.photography': 'Fotografia',
    'nav.design': 'Design Gr√°fico',
    // ... mais tradu√ß√µes
  },
  'en': {
    'nav.home': 'Home',
    'nav.photography': 'Photography',
    'nav.design': 'Graphic Design',
  }
}

export const LanguageContext = createContext<{
  language: Language
  setLanguage: (lang: Language) => void
  t: (key: string) => string
}>()

export function LanguageProvider({ children }) {
  const [language, setLanguage] = useState<Language>('pt-BR')
  
  const t = (key: string) => {
    return translations[language][key] || key
  }
  
  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  )
}

export const useLanguage = () => useContext(LanguageContext)
</code>`<code>

<strong>Uso</strong>:
</code>`<code>tsx
function Navigation() {
  const { t } = useLanguage()
  
  return (
    <nav>
      <Link to="/">{t('nav.home')}</Link>
      <Link to="/photography">{t('nav.photography')}</Link>
      <Link to="/design">{t('nav.design')}</Link>
    </nav>
  )
}
</code>`<code>

---

<h2>6. Padr√µes de C√≥digo e Best Practices</h2>

<h3>6.1 Estrutura de Componentes</h3>

<strong>Padr√£o Seguido</strong>:
</code>`<code>tsx
// 1. Imports
import { useState, useEffect } from 'react'
import { Button } from '@/components/ui/button'
import { usePhotography } from '@/hooks/useSupabaseData'

// 2. Types/Interfaces
interface PhotoGridProps {
  category?: string
  onPhotoClick?: (photo: PhotographyItem) => void
}

// 3. Component
export function PhotoGrid({ category, onPhotoClick }: PhotoGridProps) {
  // 3a. Hooks (ordem: state, effects, custom hooks)
  const [selectedId, setSelectedId] = useState<string | null>(null)
  const { photos, loading } = usePhotography(category)
  
  useEffect(() => {
    // side effects
  }, [])
  
  // 3b. Event handlers
  const handleClick = (photo: PhotographyItem) => {
    setSelectedId(photo.id)
    onPhotoClick?.(photo)
  }
  
  // 3c. Early returns
  if (loading) return <Loader />
  if (photos.length === 0) return <EmptyState />
  
  // 3d. Main render
  return (
    <div className="grid grid-cols-3 gap-4">
      {photos.map((photo) => (
        <PhotoCard
          key={photo.id}
          photo={photo}
          onClick={handleClick}
          selected={photo.id === selectedId}
        />
      ))}
    </div>
  )
}
</code>`<code>

---

<h3>6.2 Naming Conventions</h3>

<strong>Arquivos</strong>:
- Componentes: </code>PascalCase.tsx<code> (ex: </code>PhotoGrid.tsx<code>)
- Hooks: </code>camelCase.ts<code> (ex: </code>useSupabaseData.ts<code>)
- Utils: </code>camelCase.ts<code> (ex: </code>formatDate.ts<code>)

<strong>Vari√°veis</strong>:
</code>`<code>typescript
// ‚úÖ BOM
const photoList = []
const isLoading = false
const handleClick = () => {}

// ‚ùå EVITE
const photo_list = [] // snake_case
const PHOTO_LIST = [] // SCREAMING_CASE para constantes
</code>`<code>

<strong>Componentes</strong>:
</code>`<code>typescript
// ‚úÖ BOM: Nome descritivo
function PhotoUploadButton() {}
function UserProfileCard() {}

// ‚ùå EVITE: Gen√©rico
function Button1() {}
function Component() {}
</code>`<code>

---

<h2>7. Guias de Implementa√ß√£o Espec√≠ficos</h2>

<h3>7.1 Como Adicionar Nova P√°gina</h3>

1. <strong>Criar arquivo da p√°gina</strong>:
</code>`<code>tsx
// src/pages/Services.tsx

import { SEO } from '@/components/SEO'

export function Services() {
  return (
    <>
      <SEO
        title="Servi√ßos"
        description="Confira os servi√ßos de fotografia oferecidos"
        url="/services"
      />
      
      <div className="container mx-auto py-12">
        <h1>Meus  Servi√ßos</h1>
        {/* conte√∫do */}
      </div>
    </>
  )
}
</code>`<code>

2. <strong>Adicionar rota no App.tsx</strong>:
</code>`<code>tsx
import { Services } from './pages/Services'

<Route path="/services" element={<Services />} />
</code>`<code>

3. <strong>Adicionar link na navega√ß√£o</strong>:
</code>`<code>tsx
// src/components/Navigation.tsx

<Link to="/services">Servi√ßos</Link>
</code>`<code>

---

<h3>7.2 Como Adicionar Nova Tabela no Supabase</h3>

1. <strong>Criar tabela via SQL</strong>:
</code>`<code>sql
CREATE TABLE testimonials (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  client_name TEXT NOT NULL,
  content TEXT NOT NULL,
  rating INTEGER CHECK (rating >= 1 AND rating <= 5),
  created_at TIMESTAMPTZ DEFAULT NOW()
);
</code>`<code>

2. <strong>Habilitar RLS</strong>:
</code>`<code>sql
ALTER TABLE testimonials ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Leitura p√∫blica"
ON testimonials FOR SELECT
USING (true);

CREATE POLICY "Admin insere"
ON testimonials FOR INSERT
WITH CHECK (auth.role() = 'authenticated');
</code>`<code>

3. <strong>Criar interface TypeScript</strong>:
</code>`<code>typescript
// src/lib/supabase.ts

export interface Testimonial {
  id: string
  client_name: string
  content: string
  rating: number
  created_at: string
}
</code>`<code>

4. <strong>Criar hook</strong>:
</code>`<code>typescript
// src/hooks/useSupabaseData.ts

export function useTestimonials() {
  const [testimonials, setTestimonials] = useState<Testimonial[]>([])
  const [loading, setLoading] = useState(true)
  
  useEffect(() => {
    fetchTestimonials()
  }, [])
  
  const fetchTestimonials = async () => {
    const { data } = await supabase
      .from('testimonials')
      .select('*')
      .order('created_at', { ascending: false })
    
    if (data) setTestimonials(data)
    setLoading(false)
  }
  
  return { testimonials, loading, refresh: fetchTestimonials }
}
</code>`<code>

---

<h3>7.3 Como Adicionar Upload de Novo Tipo de Arquivo</h3>

1. <strong>Criar bucket no Supabase</strong>:
   - Storage > New Bucket > "documents"
   - Marcar como p√∫blico se necess√°rio

2. <strong>Adicionar constante</strong>:
</code>`<code>typescript
// src/lib/supabase.ts

export const DOCUMENTS_BUCKET = 'documents'
</code>`<code>

3. <strong>Criar fun√ß√£o de upload espec√≠fica (se necess√°rio)</strong>:
</code>`<code>typescript
export async function uploadDocument(file: File): Promise<string> {
  // Valida√ß√£o de tipo
  const allowedTypes = ['application/pdf', 'application/msword']
  if (!allowedTypes.includes(file.type)) {
    throw new Error('Tipo de arquivo n√£o permitido')
  }
  
  // Valida√ß√£o de tamanho (ex: max 10MB)
  if (file.size > 10 * 1024 * 1024) {
    throw new Error('Arquivo muito grande (m√°x 10MB)')
  }
  
  return uploadImage(DOCUMENTS_BUCKET, file)
}
</code>`<code>

---

<h2>üìö Recursos de Aprendizado</h2>

<h3>Documenta√ß√£o Oficial</h3>
- <a href="https://react.dev/">React</a>
- <a href="https://www.typescriptlang.org/docs/">TypeScript</a>
- <a href="https://vitejs.dev/">Vite</a>
- <a href="https://tailwindcss.com/docs">Tailwind CSS</a>
- <a href="https://supabase.com/docs">Supabase</a>
- <a href="https://ui.shadcn.com/">shadcn/ui</a>

<h3>Tutoriais Recomendados</h3>
- Supabase Auth: https://supabase.com/docs/guides/auth
- Row Level Security: https://supabase.com/docs/guides/auth/row-level-security
- React Hooks: https://react.dev/reference/react

---

<strong>Documento criado em</strong>: 30 de Novembro de 2025  
<strong>Vers√£o</strong>: 1.0.0

*Este guia complementa a documenta√ß√£o principal com detalhes t√©cnicos, orienta√ß√µes e justificativas para cada escolha tecnol√≥gica.*
# Database Schema & Documenta√ß√£o de Ferramentas
<h2>Portfolio de Fotografia - Banco de Dados Completo</h2>

---

<h2>üìã √çndice</h2>

1. <a href="#1-links-de-documenta√ß√£o-oficial">Links de Documenta√ß√£o Oficial</a>
2. <a href="#2-vis√£o-geral-do-banco-de-dados">Vis√£o Geral do Banco de Dados</a>
3. <a href="#3-schemas-completos-das-tabelas">Schemas Completos das Tabelas</a>
4. <a href="#4-relacionamentos-entre-tabelas">Relacionamentos entre Tabelas</a>
5. <a href="#5-pol√≠ticas-de-seguran√ßa-rls">Pol√≠ticas de Seguran√ßa (RLS)</a>
6. <a href="#6-triggers-e-functions">Triggers e Functions</a>
7. <a href="#7-√≠ndices-e-otimiza√ß√µes">√çndices e Otimiza√ß√µes</a>

---

<h2>1. Links de Documenta√ß√£o Oficial</h2>

<h3>üõ† Frontend Technologies</h3>

| Ferramenta | Vers√£o | Documenta√ß√£o Oficial | Guia de In√≠cio |
|------------|--------|----------------------|----------------|
| <strong>React</strong> | 18.3.1 | <a href="https://react.dev/">https://react.dev/</a> | <a href="https://react.dev/learn">Learn React</a> |
| <strong>TypeScript</strong> | 5.8.3 | <a href="https://www.typescriptlang.org/docs/">https://www.typescriptlang.org/docs/</a> | <a href="https://www.typescriptlang.org/docs/handbook/intro.html">Handbook</a> |
| <strong>Vite</strong> | 5.4.19 | <a href="https://vitejs.dev/">https://vitejs.dev/</a> | <a href="https://vitejs.dev/guide/">Getting Started</a> |
| <strong>Tailwind CSS</strong> | 3.4.17 | <a href="https://tailwindcss.com/docs">https://tailwindcss.com/docs</a> | <a href="https://tailwindcss.com/docs/installation">Installation</a> |
| <strong>React Router</strong> | 6.30.1 | <a href="https://reactrouter.com/">https://reactrouter. com/</a> | <a href="https://reactrouter.com/en/main/start/tutorial">Tutorial</a> |

<h3>Backend & Database</h3>

| Ferramenta | Documenta√ß√£o Oficial | Guias Importantes |
|------------|----------------------|-------------------|
| <strong>Supabase</strong> | <a href="https://supabase.com/docs">https://supabase.com/docs</a> | <a href="https://supabase.com/docs/guides/getting-started">Quickstart</a> |
| <strong>PostgreSQL</strong> | <a href="https://www.postgresql.org/docs/">https://www.postgresql.org/docs/</a> | <a href="https://www.postgresql.org/docs/current/tutorial.html">Tutorial</a> |
| <strong>Supabase Auth</strong> | <a href="https://supabase.com/docs/guides/auth">Auth Docs</a> | <a href="https://supabase.com/docs/guides/auth/row-level-security">Row Level Security</a> |
| <strong>Supabase Storage</strong> | <a href="https://supabase.com/docs/guides/storage">Storage Docs</a> | <a href="https://supabase.com/docs/guides/storage/serving/image-transformations">CDN & Images</a> |

<h3>üìö UI & Component Libraries</h3>

| Biblioteca | Documenta√ß√£o | Uso no Projeto |
|------------|--------------|----------------|
| <strong>shadcn/ui</strong> | <a href="https://ui.shadcn.com/">https://ui.shadcn.com/</a> | 49 componentes UI |
| <strong>Radix UI</strong> | <a href="https://www.radix-ui.com/">https://www.radix-ui.com/</a> | Base do shadcn/ui |
| <strong>Lucide Icons</strong> | <a href="https://lucide.dev/">https://lucide.dev/</a> | √çcones SVG |
| <strong>Embla Carousel</strong> | <a href="https://www.embla-carousel.com/">https://www.embla-carousel.com/</a> | Carross√©is de imagens |

<h3>üîß Specialized Libraries</h3>

| Biblioteca | Vers√£o | Documenta√ß√£o | Prop√≥sito no Projeto |
|------------|--------|--------------|----------------------|
| <strong>exifr</strong> | 7.1.3 | <a href="https://mutiny.cz/exifr/">https://mutiny.cz/exifr/</a> | Extra√ß√£o de metadados EXIF |
| <strong>react-helmet-async</strong> | 2.0.5 | <a href="https://github.com/staylor/react-helmet-async">GitHub</a> | SEO meta tags |
| <strong>react-hook-form</strong> | 7.61.1 | <a href="https://react-hook-form.com/">https://react-hook-form.com/</a> | Gerenciamento de formul√°rios |
| <strong>zod</strong> | 3.25.76 | <a href="https://zod.dev/">https://zod.dev/</a> | Valida√ß√£o de schemas |
| <strong>@tanstack/react-query</strong> | 5.83.0 | <a href="https://tanstack.com/query/">https://tanstack.com/query/</a> | Cache e sincroniza√ß√£o |
| <strong>date-fns</strong> | 3.6.0 | <a href="https://date-fns.org/">https://date-fns.org/</a> | Manipula√ß√£o de datas |

---

<h2>2. Vis√£o Geral do Banco de Dados</h2>

<h3>2.1 Resumo das Tabelas</h3>

| Tabela | Prop√≥sito | Linhas (estimado) | Relacionamentos |
|--------|-----------|-------------------|-----------------|
| <strong>photography</strong> | Armazena fotografias do portf√≥lio | Centenas | ‚Üí comments |
| <strong>design_projects</strong> | Projetos de design gr√°fico | Dezenas | ‚Üí comments |
| <strong>comments</strong> | Coment√°rios em fotos/projetos | Centenas | ‚Üê photography, design_projects |
| <strong>hero_images</strong> | Imagens do banner principal | 5-10 | Nenhum |
| <strong>site_content</strong> | Textos do site (i18n) | ~180 | Nenhum |

<h3>2.2 Diagrama ER (Entity-Relationship)</h3>

</code>`<code>mermaid
erDiagram
    photography ||--o{ comments : "has"
    design_projects ||--o{ comments : "has"
    comments ||--o{ comments : "replies to"
    
    photography {
        uuid id PK
        text title
        text category
        text url
        text description
        int year
        text event_name
        date event_date
        text[] tags
        text camera_make
        text camera_model
        int iso
        text aperture
        int likes_count
        int comments_count
        int shares_count
        timestamp created_at
    }
    
    design_projects {
        uuid id PK
        text title
        text category
        text description
        text[] images
        text client
        int year
        text[] tags
        int likes_count
        int comments_count
        int shares_count
        timestamp created_at
    }
    
    comments {
        uuid id PK
        text content
        text user_name
        uuid photo_id FK
        uuid project_id FK
        uuid parent_id FK
        boolean approved
        boolean is_admin
        timestamp created_at
    }
    
    hero_images {
        uuid id PK
        text url
        text title
        boolean active
        text page
        timestamp created_at
    }
    
    site_content {
        text key PK
        text lang PK
        text value
        timestamp created_at
    }
</code>`<code>

---

<h2>3. Schemas Completos das Tabelas</h2>

<h3>3.1 Tabela: </code>photography<code></h3>

<strong>Prop√≥sito</strong>: Armazena todas as fotografias do portf√≥lio com metadados completos

</code>`<code>sql
CREATE TABLE photography (
  -- Identificadores
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  
  -- Informa√ß√µes B√°sicas
  title TEXT NOT NULL,
  category TEXT CHECK (category IN ('portraits', 'urban', 'nature', 'art', 'events')),
  url TEXT NOT NULL, -- URL da imagem no Supabase Storage
  description TEXT,
  year INTEGER,
  
  -- Informa√ß√µes de Eventos (opcional)
  event_name TEXT,
  event_date DATE,
  
  -- Tags para busca
  tags TEXT[], -- Array de strings
  
  -- Metadados EXIF (extra√≠dos automaticamente)
  camera_make TEXT,       -- Ex: "Canon"
  camera_model TEXT,      -- Ex: "EOS R5"
  lens_model TEXT,        -- Ex: "RF 24-70mm F2.8 L IS USM"
  iso INTEGER,            -- Ex: 400
  aperture TEXT,          -- Ex: "f/2.8"
  shutter_speed TEXT,     -- Ex: "1/250s"
  focal_length TEXT,      -- Ex: "50mm"
  capture_date TIMESTAMP WITH TIME ZONE, -- Data da captura original
  
  -- Intera√ß√µes Sociais
  likes_count INTEGER DEFAULT 0 NOT NULL,
  comments_count INTEGER DEFAULT 0 NOT NULL,
  shares_count INTEGER DEFAULT 0 NOT NULL,
  
  -- Timestamps
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- √çndices para performance
CREATE INDEX idx_photography_category ON photography(category);
CREATE INDEX idx_photography_year ON photography(year);
CREATE INDEX idx_photography_created_at ON photography(created_at DESC);
CREATE INDEX idx_photography_tags ON photography USING GIN(tags); -- GIN index para arrays

-- Habilitar Row Level Security
ALTER TABLE photography ENABLE ROW LEVEL SECURITY;
</code>`<code>

<strong>Dados de Exemplo</strong>:
</code>`<code>sql
INSERT INTO photography (title, category, url, description, year, tags, camera_make, camera_model, iso) VALUES
(
  'Retrato em Est√∫dio',
  'portraits',
  'https://xxxxx.supabase.co/storage/v1/object/public/photography/abc123.jpg',
  'üì∑ Canon EOS R5\nüîç RF 85mm F1.2 L USM\n‚öôÔ∏è 85mm ‚Ä¢ f/1.8 ‚Ä¢ 1/125s ‚Ä¢ ISO 200',
  2024,
  ARRAY['retrato', 'est√∫dio', 'comercial'],
  'Canon',
  'EOS R5',
  200
);
</code>`<code>

---

<h3>3.2 Tabela: </code>design_projects<code></h3>

<strong>Prop√≥sito</strong>: Armazena projetos de design gr√°fico com m√∫ltiplas imagens

</code>`<code>sql
CREATE TABLE design_projects (
  -- Identificadores
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  
  -- Informa√ß√µes B√°sicas
  title TEXT NOT NULL,
  category TEXT CHECK (category IN ('branding', 'editorial', 'web', 'illustration', 'packaging')),
  description TEXT NOT NULL,
  
  -- Imagens (array de URLs)
  images TEXT[] NOT NULL, -- M√∫ltiplas imagens por projeto
  
  -- Informa√ß√µes do Projeto
  client TEXT, -- Nome do cliente (opcional)
  year INTEGER,
  link TEXT, -- Link externo (portfolio, behance, etc)
  
  -- Informa√ß√µes de Eventos (opcional)
  event_name TEXT,
  event_date DATE,
  
  -- Tags para busca
  tags TEXT[],
  
  -- Intera√ß√µes Sociais
  likes_count INTEGER DEFAULT 0 NOT NULL,
  comments_count INTEGER DEFAULT 0 NOT NULL,
  shares_count INTEGER DEFAULT 0 NOT NULL,
  
  -- Timestamps
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- √çndices
CREATE INDEX idx_design_category ON design_projects(category);
CREATE INDEX idx_design_year ON design_projects(year);
CREATE INDEX idx_design_created_at ON design_projects(created_at DESC);
CREATE INDEX idx_design_tags ON design_projects USING GIN(tags);

-- Habilitar Row Level Security
ALTER TABLE design_projects ENABLE ROW LEVEL SECURITY;
</code>`<code>

<strong>Dados de Exemplo</strong>:
</code>`<code>sql
INSERT INTO design_projects (title, category, description, images, client, year, tags) VALUES
(
  'Identidade Visual - Caf√© Moderna',
  'branding',
  'Desenvolvimento completo de identidade visual para cafeteria moderna, incluindo logo, paleta de cores, tipografia e aplica√ß√µes.',
  ARRAY[
    'https://xxxxx.supabase.co/storage/v1/object/public/design/logo.jpg',
    'https://xxxxx.supabase.co/storage/v1/object/public/design/brand-guide.jpg',
    'https://xxxxx.supabase.co/storage/v1/object/public/design/mockups.jpg'
  ],
  'Caf√© Moderna',
  2024,
  ARRAY['branding', 'identidade visual', 'logo', 'caf√©']
);
</code>`<code>

---

<h3>3.3 Tabela: </code>comments<code></h3>

<strong>Prop√≥sito</strong>: Sistema de coment√°rios com modera√ß√£o, respostas e suporte a threads

</code>`<code>sql
CREATE TABLE comments (
  -- Identificadores
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  
  -- Conte√∫do
  content TEXT NOT NULL,
  user_name TEXT NOT NULL DEFAULT 'Anonymous',
  
  -- Rela√ß√µes (exclusivas - ou foto OU projeto)
  photo_id UUID REFERENCES photography(id) ON DELETE CASCADE,
  project_id UUID REFERENCES design_projects(id) ON DELETE CASCADE,
  
  -- Sistema de Respostas (threading)
  parent_id UUID REFERENCES comments(id) ON DELETE CASCADE, -- NULL = coment√°rio raiz
  
  -- Modera√ß√£o
  approved BOOLEAN DEFAULT FALSE NOT NULL, -- Coment√°rios precisam ser aprovados
  is_admin BOOLEAN DEFAULT FALSE NOT NULL, -- Marca respostas do administrador
  
  -- Timestamp
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
  
  -- Constraints
  CONSTRAINT comments_item_check CHECK (
    (photo_id IS NOT NULL AND project_id IS NULL) OR
    (photo_id IS NULL AND project_id IS NOT NULL)
  ) -- Garante que comenta em FOTO ou PROJETO, n√£o ambos
);

-- √çndices
CREATE INDEX idx_comments_photo_id ON comments(photo_id);
CREATE INDEX idx_comments_project_id ON comments(project_id);
CREATE INDEX idx_comments_parent_id ON comments(parent_id);
CREATE INDEX idx_comments_approved ON comments(approved);
CREATE INDEX idx_comments_created_at ON comments(created_at DESC);

-- Habilitar Row Level Security
ALTER TABLE comments ENABLE ROW LEVEL SECURITY;
</code>`<code>

<strong>Dados de Exemplo</strong>:
</code>`<code>sql
-- Coment√°rio raiz
INSERT INTO comments (content, user_name, photo_id, approved) VALUES
('Foto incr√≠vel! Adorei a composi√ß√£o.', 'Jo√£o Silva', 'uuid-da-foto', true);

-- Resposta do admin
INSERT INTO comments (content, user_name, photo_id, parent_id, approved, is_admin) VALUES
('Obrigado! üòä', 'Tiago', 'uuid-da-foto', 'uuid-do-comentario-acima', true, true);
</code>`<code>

---

<h3>3.4 Tabela: </code>hero_images<code></h3>

<strong>Prop√≥sito</strong>: Gerencia imagens do banner hero/carousel da homepage

</code>`<code>sql
CREATE TABLE hero_images (
  -- Identificadores
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  
  -- Imagem
  url TEXT NOT NULL, -- URL no Supabase Storage
  title TEXT NOT NULL, -- T√≠tulo de refer√™ncia (n√£o exibido no site)
  
  -- Status
  active BOOLEAN DEFAULT TRUE NOT NULL, -- Imagem est√° ativa?
  page TEXT, -- Opcional: 'home', 'photography', 'design' (para diferentes p√°ginas)
  
  -- Timestamp
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL
);

-- √çndice
CREATE INDEX idx_hero_active ON hero_images(active) WHERE active = true;

-- Habilitar Row Level Security
ALTER TABLE hero_images ENABLE ROW LEVEL SECURITY;
</code>`<code>

<strong>Dados de Exemplo</strong>:
</code>`<code>sql
INSERT INTO hero_images (url, title, active, page) VALUES
('https://xxxxx.supabase.co/storage/v1/object/public/hero/hero1.jpg', 'Paisagem Urbana', true, 'home'),
('https://xxxxx.supabase.co/storage/v1/object/public/hero/hero2.jpg', 'Retrato Profissional', true, 'home'),
('https://xxxxx.supabase.co/storage/v1/object/public/hero/hero3.jpg', 'Projeto de Design', false, 'home');
</code>`<code>

---

<h3>3.5 Tabela: </code>site_content<code></h3>

<strong>Prop√≥sito</strong>: Sistema de CMS para internacionaliza√ß√£o (i18n) de textos do site

</code>`<code>sql
CREATE TABLE site_content (
  -- Chaves Compostas
  key TEXT NOT NULL,   -- Ex: 'nav.home', 'hero.title'
  lang TEXT NOT NULL,  -- Ex: 'pt', 'en'
  
  -- Valor
  value TEXT NOT NULL, -- Texto traduzido
  
  -- Timestamp
  created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()) NOT NULL,
  
  -- Primary Key Composta
  PRIMARY KEY (key, lang)
);

-- √çndice para busca por idioma
CREATE INDEX idx_site_content_lang ON site_content(lang);

-- Habilitar Row Level Security
ALTER TABLE site_content ENABLE ROW LEVEL SECURITY;
</code>`<code>

<strong>Dados de Exemplo</strong>:
</code>`<code>sql
-- Portugu√™s
INSERT INTO site_content (key, lang, value) VALUES
('nav.home', 'pt', 'In√≠cio'),
('nav.photography', 'pt', 'Fotografia'),
('nav.design', 'pt', 'Design Gr√°fico'),
('hero.title', 'pt', 'Tiago Damasceno'),
('hero.subtitle', 'pt', 'Fot√≥grafo & Designer Gr√°fico');

-- Ingl√™s
INSERT INTO site_content (key, lang, value) VALUES
('nav.home', 'en', 'Home'),
('nav.photography', 'en', 'Photography'),
('nav.design', 'en', 'Graphic Design'),
('hero.title', 'en', 'Tiago Damasceno'),
('hero.subtitle', 'en', 'Photographer & Graphic Designer');
</code>`<code>

<strong>Uso no Frontend</strong>:
</code>`<code>typescript
const { t } = useLanguage() // Hook do contexto de idioma

<h1>{t('hero.title')}</h1> // Renderiza "Tiago Damasceno"
<h2>{t('hero.subtitle')}</h2> // PT: "Fot√≥grafo & Designer Gr√°fico"
                               // EN: "Photographer & Graphic Designer"
</code>`<code>

---

<h2>4. Relacionamentos entre Tabelas</h2>

<h3>4.1 Diagrama de Relacionamentos Detalhado</h3>

</code>`<code>
photography (1) ---- (*) comments
    |
    ‚îî‚îÄ photo_id FK

design_projects (1) ---- (*) comments
    |
    ‚îî‚îÄ project_id FK

comments (1) ---- (*) comments (self-reference)
    |
    ‚îî‚îÄ parent_id FK (para respostas/threads)
</code>`<code>

<h3>4.2 Foreign Keys e Cascades</h3>

</code>`<code>sql
-- Coment√°rios em Fotografias
ALTER TABLE comments
ADD CONSTRAINT fk_comments_photo
FOREIGN KEY (photo_id)
REFERENCES photography(id)
ON DELETE CASCADE; -- Deleta coment√°rios se foto for deletada

-- Coment√°rios em Projetos
ALTER TABLE comments
ADD CONSTRAINT fk_comments_project
FOREIGN KEY (project_id)
REFERENCES design_projects(id)
ON DELETE CASCADE;

-- Respostas a Coment√°rios (threading)
ALTER TABLE comments
ADD CONSTRAINT fk_comments_parent
FOREIGN KEY (parent_id)
REFERENCES comments(id)
ON DELETE CASCADE; -- Deleta respostas se coment√°rio pai for deletado
</code>`<code>

---

<h2>5. Pol√≠ticas de Seguran√ßa (RLS)</h2>

<h3>5.1 Pol√≠ticas para </code>photography<code></h3>

</code>`<code>sql
-- 1. Leitura P√∫blica (SELECT)
CREATE POLICY "Leitura p√∫blica de fotografia"
ON photography FOR SELECT
USING (true); -- Qualquer um pode ver

-- 2. Inser√ß√£o apenas Autenticados (INSERT)
CREATE POLICY "Apenas autenticados inserem"
ON photography FOR INSERT
WITH CHECK (auth.role() = 'authenticated');

-- 3. Atualiza√ß√£o apenas Autenticados (UPDATE)
CREATE POLICY "Apenas autenticados atualizam"
ON photography FOR UPDATE
USING (auth.role() = 'authenticated');

-- 4. Dele√ß√£o apenas Autenticados (DELETE)
CREATE POLICY "Apenas autenticados deletam"
ON photography FOR DELETE
USING (auth.role() = 'authenticated');
</code>`<code>

<h3>5.2 Pol√≠ticas para </code>design_projects<code></h3>

</code>`<code>sql
-- Id√™nticas √†s de photography
CREATE POLICY "Leitura p√∫blica de projetos"
ON design_projects FOR SELECT
USING (true);

CREATE POLICY "Apenas autenticados inserem projetos"
ON design_projects FOR INSERT
WITH CHECK (auth.role() = 'authenticated');

CREATE POLICY "Apenas autenticados atualizam projetos"
ON design_projects FOR UPDATE
USING (auth.role() = 'authenticated');

CREATE POLICY "Apenas autenticados deletam projetos"
ON design_projects FOR DELETE
USING (auth.role() = 'authenticated');
</code>`<code>

<h3>5.3 Pol√≠ticas para </code>comments<code> (com Modera√ß√£o)</h3>

</code>`<code>sql
-- 1. SELECT: P√∫blico v√™ apenas aprovados, Admin v√™ tudo
CREATE POLICY "P√∫blico v√™ coment√°rios aprovados"
ON comments FOR SELECT
USING (approved = true);

CREATE POLICY "Admin v√™ todos os coment√°rios"
ON comments FOR SELECT
USING (auth.role() = 'authenticated');

-- 2. INSERT: Qualquer um pode comentar (mas ficar√° pendente)
CREATE POLICY "Qualquer um pode comentar"
ON comments FOR INSERT
WITH CHECK (true); -- approved ser√° FALSE por padr√£o

-- 3. UPDATE: Apenas admin (para aprovar/rejeitar)
CREATE POLICY "Admin aprova coment√°rios"
ON comments FOR UPDATE
USING (auth.role() = 'authenticated');

-- 4. DELETE: Apenas admin
CREATE POLICY "Admin deleta coment√°rios"
ON comments FOR DELETE
USING (auth.role() = 'authenticated');
</code>`<code>

<h3>5.4 Pol√≠ticas para </code>hero_images<code> e </code>site_content<code></h3>

</code>`<code>sql
-- Hero Images: Leitura p√∫blica, admin gerencia
CREATE POLICY "Leitura p√∫blica de hero"
ON hero_images FOR SELECT
USING (true);

CREATE POLICY "Admin gerencia hero"
ON hero_images FOR ALL
USING (auth.role() = 'authenticated');

-- Site Content: Leitura p√∫blica, admin gerencia
CREATE POLICY "Leitura p√∫blica de conte√∫do"
ON site_content FOR SELECT
USING (true);

CREATE POLICY "Admin gerencia conte√∫do"
ON site_content FOR ALL
USING (auth.role() = 'authenticated');
</code>`<code>

---

<h2>6. Triggers e Functions</h2>

<h3>6.1 Trigger: Atualizar Contador de Coment√°rios</h3>

</code>`<code>sql
-- Function que atualiza contadores
CREATE OR REPLACE FUNCTION update_comments_count()
RETURNS TRIGGER AS $$
BEGIN
  -- Ao aprovar/adicionar coment√°rio, atualiza contador
  IF (TG_OP = 'INSERT' AND NEW.approved = true) OR
     (TG_OP = 'UPDATE' AND OLD.approved = false AND NEW.approved = true) THEN
    
    -- Incrementa contador na tabela pai
    IF NEW.photo_id IS NOT NULL THEN
      UPDATE photography
      SET comments_count = comments_count + 1
      WHERE id = NEW.photo_id;
    END IF;
    
    IF NEW.project_id IS NOT NULL THEN
      UPDATE design_projects
      SET comments_count = comments_count + 1
      WHERE id = NEW.project_id;
    END IF;
  END IF;
  
  -- Ao deletar coment√°rio aprovado, decrementa
  IF TG_OP = 'DELETE' AND OLD.approved = true THEN
    IF OLD.photo_id IS NOT NULL THEN
      UPDATE photography
      SET comments_count = GREATEST(comments_count - 1, 0)
      WHERE id = OLD.photo_id;
    END IF;
    
    IF OLD.project_id IS NOT NULL THEN
      UPDATE design_projects
      SET comments_count = GREATEST(comments_count - 1, 0)
      WHERE id = OLD.project_id;
    END IF;
  END IF;
  
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- Trigger
CREATE TRIGGER comments_count_trigger
AFTER INSERT OR UPDATE OR DELETE ON comments
FOR EACH ROW
EXECUTE FUNCTION update_comments_count();
</code>`<code>

<h3>6.2 Trigger: Atualizar </code>updated_at<code></h3>

</code>`<code>sql
CREATE OR REPLACE FUNCTION update_modified_column()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = timezone('utc'::text, now());
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- Aplicar em todas as tabelas relevantes
CREATE TRIGGER update_photography_modtime
BEFORE UPDATE ON photography
FOR EACH ROW
EXECUTE FUNCTION update_modified_column();

CREATE TRIGGER update_design_modtime
BEFORE UPDATE ON design_projects
FOR EACH ROW
EXECUTE FUNCTION update_modified_column();
</code>`<code>

---

<h2>7. √çndices e Otimiza√ß√µes</h2>

<h3>7.1 √çndices de Performance</h3>

</code>`<code>sql
-- Photography: busca por categoria, ano, tags
CREATE INDEX idx_photography_category ON photography(category);
CREATE INDEX idx_photography_year ON photography(year);
CREATE INDEX idx_photography_created_at ON photography(created_at DESC);
CREATE INDEX idx_photography_tags ON photography USING GIN(tags); -- GIN para arrays

-- Design: similar
CREATE INDEX idx_design_category ON design_projects(category);
CREATE INDEX idx_design_year ON design_projects(year);
CREATE INDEX idx_design_created_at ON design_projects(created_at DESC);
CREATE INDEX idx_design_tags ON design_projects USING GIN(tags);

-- Comments: busca por item e status
CREATE INDEX idx_comments_photo_id ON comments(photo_id);
CREATE INDEX idx_comments_project_id ON comments(project_id);
CREATE INDEX idx_comments_approved ON comments(approved);
CREATE INDEX idx_comments_parent_id ON comments(parent_id); -- Para threads
</code>`<code>

<h3>7.2 Full-Text Search (Futura Implementa√ß√£o)</h3>

</code>`<code>sql
-- Adicionar coluna de busca full-text (tsvector)
ALTER TABLE photography
ADD COLUMN tsv tsvector
GENERATED ALWAYS AS (
  to_tsvector('portuguese',
    coalesce(title, '') || ' ' ||
    coalesce(description, '') || ' ' ||
    coalesce(array_to_string(tags, ' '), '')
  )
) STORED;

-- √çndice GIN para full-text search
CREATE INDEX idx_photography_fts ON photography USING GIN(tsv);

-- Busca:
SELECT * FROM photography
WHERE tsv @@ to_tsquery('portuguese', 'retrato & est√∫dio');
</code>``

---

<h2>üìä Resumo de Estat√≠sticas</h2>

<h3>Contagem de Objetos do Banco</h3>

| Tipo | Quantidade | Detalhes |
|------|------------|----------|
| <strong>Tabelas</strong> | 5 | photography, design_projects, comments, hero_images, site_content |
| <strong>Colunas</strong> | ~60 | Total em todas as tabelas |
| <strong>√çndices</strong> | ~20 | Incluindo PKs, FKs e custom |
| <strong>Pol√≠ticas RLS</strong> | ~20 | Cobrindo SELECT, INSERT, UPDATE, DELETE |
| <strong>Triggers</strong> | 4 | Comments count, updated_at |
| <strong>Functions</strong> | 2 | update_comments_count, update_modified_column |
| <strong>Constraints</strong> | ~10 | PKs, FKs, CHECKs |

---

<h2>üîí Seguran√ßa</h2>

<h3>Checklist de Seguran√ßa Implementada</h3>

- ‚úÖ Row Level Security (RLS) habilitado em todas as tabelas
- ‚úÖ Pol√≠ticas de leitura p√∫blica para conte√∫do
- ‚úÖ Pol√≠ticas de escrita apenas para autenticados
- ‚úÖ Foreign Keys com CASCADE para integridade referencial
- ‚úÖ CHECK constraints para valida√ß√£o de dados
- ‚úÖ √çndices para prevenir N+1 queries
- ‚úÖ Triggers para manter contadores consistentes
- ‚úÖ GPS desabilitado na extra√ß√£o EXIF (privacidade)

---

<h2>üìö Scripts SQL Utilizados</h2>

<h3>Arquivos de Migra√ß√£o/Setup</h3>

1. <strong>supabase-setup.sql</strong> - Configura√ß√£o inicial
2. <strong>cms-setup.sql</strong> - Tabela site_content com 180 registros PT
3. <strong>hero-setup.sql</strong> - Tabela hero_images
4. <strong>complete_social_setup.sql</strong> - Contadores sociais (likes, shares)
5. <strong>comment_approval_migration.sql</strong> - Sistema de modera√ß√£o
6. <strong>comment_replies_migration.sql</strong> - Threading/respostas
7. <strong>add-events-tags-migration.sql</strong> - Campos event_name, event_date, tags
8. <strong>add-exif-columns-migration.sql</strong> - Metadados EXIF
9. <strong>fix-delete-permissions.sql</strong> - Corrige pol√≠ticas RLS de DELETE
10. <strong>update_comments_count_trigger.sql</strong> - Trigger para contadores

---

<strong>Documento criado em</strong>: 30 de Novembro de 2025  
<strong>Vers√£o</strong>: 1.0.0

*Este documento apresenta o schema completo do banco de dados com todos os detalhes t√©cnicos e links para documenta√ß√£o oficial de cada ferramenta.*
</div><div class='footer'><span>Portfolio - Tiago Damasceno</span><span>tdfoco.cloud</span></div></body></html>
